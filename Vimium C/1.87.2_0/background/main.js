(function(){"use strict";var t,i,u,s,_,g,p,b,B,U,y,w,C,k,T,I,R,x,M,S,V,D,N,A,H,P,$,E,z,F,O,L,q,K,W,Z,J,G,Q,X,Y,nn,tn,en,rn,un,on,ln,an,fn,cn,sn,dn,_n,vn,gn,mn,pn,bn,Bn,Un,hn,yn,wn,Cn,kn,Tn,In,Rn,xn,Mn,Sn,Vn,Dn,Nn=l,An=Nn.Ze,Hn=Nn.en,Pn=false,$n=0,En=null,jn=null,zn=1,Fn=function(){return En},On=function(n){zn=n},Ln=0,qn=0,Kn=function(){var n=Date.now();return n-qn>8e3&&(Ln=1+(0|1879048191*Math.random())+(4095&n)),qn=n,Ln},Wn=chrome,Zn=Wn.tabs,Jn=Wn.windows,Gn=function(){return Wn.sessions},Qn=function(){return Wn.webNavigation},Xn=r.x,Yn=Zn.get,nt=function(n){return n.url||n.pendingUrl},tt=Zn.query.bind(null,{active:true,currentWindow:true}),et=Zn.query.bind(null,{currentWindow:true}),rt=function(n,t){var e=m.lt,r={populate:n};e>=0?Jn.get(e,r,t):Jn.getCurrent(r,t)},it=Jn.getAll,ut=function(n){for(var t=n.length;0<--t;)if(n[t].active)return n[t];return n[0]},ot=function(n,t){Zn.update(n,{active:true},t?lt:null)},lt=function(n){return n&&Jn.update(n.windowId,{focused:true}),Xn()},at=function(n,t,e){var r,i=n.url;return i?(r=Nn.q.get(i))&&1===r&&delete n.url:(i=Nn.ce.newTabUrl_f,2===m.ft&&(-1==e?i.endsWith(Nn.E.Pn)&&i.startsWith(location.origin):!e&&i.startsWith(location.protocol))||(n.url=i),n.url||delete n.url),Zn.create(n,t)},ft=function(n,t,e){if(e){if(e.length>0&&e[0].incognito&&r.P(n))return at({url:n}),void r.y()}else if(r.P(n)&&true!==t)return void tt(ft.bind(null,n,true));var i={url:n};e?Zn.update(e[0].id,i,Xn):Zn.update(i,Xn),r.y()},ct=function(n,t,e){var r=n.windowId,i=null!=n.index;if(at(n,n.active?function(n){n&&n.windowId!==r&&lt(n)}:null,e),!(t<2)){n.active=false;do{i&&++n.index,Zn.create(n)}while(--t>1)}},st=function(n,t,e){var r,i=false!==n.focused,u="minimized";i?t===u&&(t="normal"):t!==u&&(t="normal"),t&&f>=44&&(n.state=t,t=""),n.focused=true,"string"!=typeof(r=n.url)||r&&1!==Nn.q.get(r)||delete n.url,Jn.create(n,t||!i?function(n){if(e&&e(n),n){var r=i?{}:{focused:false};t&&(r.state=t),Jn.update(n.id,r)}}:e||null)},dt=r.L(),_t=[],vt=-4,gt=function(n,t){90!==n.H?s[n.H](n,t):t.postMessage({N:4,m:n.i,r:s[n.c](n.a,t)})},mt=function(n,t){var e,r,i=Ut(n),u=i.t,o=i.u,l=dt[u],f=o===Nn.ce.vomnibarPage_f,s=0;if(t>=8||f)if(t<16||f){if(bt(n,u,t))return;i.f=2}else{if(999===t)return;s=(t>>>4&3)-1,128&t&&1===s&&(s=384&t?2:0),i.f=(128&t?3:2)+(64&t&&4)}t>=16?n.postMessage({N:6,d:An}):(e=void 0,r=0,l&&1&(r=i.f=3&l[0].s.f)?e=2!==(s=l[0].s.s)?null:"":s=null===(e=a.Zn(o,i))?0:e?1:2,n.postMessage({N:0,s:r,c:An,p:e,m:c.dt,t:c._t,k:c.ut})),i.s=s,n.onDisconnect.addListener(pt),n.onMessage.addListener(gt),l?(l.push(n),2&t&&(Pn&&l[0].s.s!==s&&a.ct(u,s),l[0]=n)):(dt[u]=[n,n],0!==s&&Pn&&a.ct(u,s))},pt=function(n){var t,e=n.s.t,r=dt[e];r&&(t=r.lastIndexOf(n),n.s.i?(t===r.length-1?--r.length:t>=1&&r.splice(t,1),r.length<=1?delete dt[e]:n===r[0]&&(r[0]=r[1])):t>=0&&delete dt[e])},bt=function(n,t,e){if(e>=8){if(!It(n,false))return t<0&&(n.s.t=8!==e?vt--:jn?jn.s.t:m.vt),_t.push(n),n.onDisconnect.addListener(Bt),n.onMessage.addListener(gt),8===e&&n.postMessage({N:42,l:Hn,s:Kn()}),true}else if(!(t<0||f<50||0===n.s.i))return Zn.executeScript(t,{file:Nn.E.Dn,frameId:n.s.i,runAt:"document_start"},Xn),n.disconnect(),true;return false},Bt=function(n){var t=_t,e=t.lastIndexOf(n);e===t.length-1?--t.length:e>=0&&t.splice(e,1)},Ut=function(n){var t=n.sender,e=t.tab||{id:vt--,url:"",incognito:false},r=t.url;return t.tab=null,n.s={i:t.frameId,a:e.incognito,s:0,f:0,t:e.id,u:r}},ht=function(n,t,e){return(n=n||kt(m.vt,0))&&Exclusions.Qn.length&&(t||Exclusions.Yn)?n.s.u:new Promise(function(t){var r=4!==OnOther&&n&&n.s.i?Qn():null;n?(r?r.getFrame:Yn)(r?{tabId:n.s.t,frameId:n.s.i}:n.s.t,function(i){var u=i?i.url:"";return!u&&r&&(e.N=3,Rt(n,e)),t(u),Xn()}):tt(function(n){return t(n&&n.length?nt(n[0]):""),Xn()})})},yt=function(n,t){jn=jn||kt(m.vt,0);var e=ht(jn,t,n);"string"!=typeof e?e.then(function(t){n.u=t,t&&s[n.H](n,jn)}):(n.u=e,s[n.H](n,jn))},wt=function(n){var t=dt[n?n.s.t:m.vt];return t?t[0]:null},Ct=function(n,t){var e,r;return null==n&&(n="unknown_sender"),null!=(r=(e=Nn.tn).get(n))?r:t===Nn.ce.vomnibarPage_f||(console.log("%cReceive message from an extension/sender not in the allow list: %c%s","background-color:#fffbe5","background-color:#fffbe5;color:red",n),e.set(n,false),false)},kt=function(n,t){var e,r,i=dt[n];if(!i)return null;for(e=1,r=i.length;e<r;e++)if(i[e].s.i===t)return i[e];return null},Tt=function(n){return 4&n.f?null:(n.f|=6,i)},It=function(n,t){var e=n.s,r=e.f;return 128&r||(e.f=r|=128|(e.u===Nn.ce.vomnibarPage_f||e.u===Nn.E._n?256:0)),!(256&r)&&(t||512&r||(console.warn("Receive a request from %can unsafe source page%c (should be vomnibar) :\n %s @ tab %o","color:red","color:auto",e.u.slice(0,128),e.t),e.f|=r),true)},Rt=function(n,t){try{return n.postMessage(t),1}catch(n){return 0}},xt=function(n,t,e){n.postMessage({N:7,H:t?Tt(n.s):null,m:e,k:$n,c:0})},Mt=function(n,t,e){St(jn,n,t,e,1)},St=function(n,t,e,r,i){n.postMessage({N:10,H:e?Tt(n.s):null,c:t,n:i,a:r})},Vt=function(n,t){t&&(n.startsWith("chrome-")&&n.includes("://")&&(n=n.slice(n.indexOf("/",n.indexOf("/")+2)+1)||n),n=n.length>41?n.slice(0,41)+"\u2026":n+"."),jn&&!Rt(jn,{N:12,H:Tt(jn.s),k:t?n?20:t:1,t:n})&&(jn=null)},Dt=function(t){Vt(n("notAllowA",[t]))},Nt=Nn.E.vn+","+f+";",At=function(n,e){return-1===n?$t(e,-1):(r=0===n&&Nn.an.getItem("findCSS"))?(t=Pt(r),i=e.slice(Nt.length),void(Hn.c=Nn.an.getItem("omniCSS")||"")):void Nn.yn("baseCSS",function(t){var e,r,i,u,l;Nt.slice(Nt.indexOf(",")+1),f<54&&(t=t.replace(/user-select\b/g,"-webkit-$&")),r=(t=(e=Ht(t)).ui).indexOf("all:"),i=t.lastIndexOf("{",r),u=f>=53?t.indexOf(";",r):t.length,t=t.slice(0,i+1)+t.slice(r,u+1)+t.slice(t.indexOf("\n",u)+1||t.length),f>=65&&!0?(r=t.indexOf("display:"),i=t.lastIndexOf("{",r),t=t.slice(0,i+1)+t.slice(r)):t=t.replace("contents","block"),f<73&&(t=t.replace("3px 5px","3px 7px")),f<62&&(t=t.replace(/#[\da-f]{4}([\da-f]{4})?\b/gi,function(n){n=5===n.length?"#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4]:n;var t=parseInt(n.slice(1),16);return"rgba("+(t>>>24)+","+(t>>16&255)+","+(t>>8&255)+","+((255&t)/255+"").slice(0,4)+")"})),f<69&&(t=t.replace(".LH{",".LH{box-sizing:border-box;")),o||(t=t.split("\nbody",1)[0]),t=t.replace(/\n/g,""),f<48?t=t.replace(/0\.01px|\/\*!DPI\*\/ ?[\w.]+/g,"/*!DPI*/1px"):f<85&&(t=t.replace(/0\.01px|\/\*!DPI\*\/ ?[\w.]+/g,"0.5px")),Nn.an.setItem("innerCSS",Nt+t),l=e.find,o||(l=l.replace("@media(-ms-high-contrast:active){","").slice(0,-1)),l=l.replace(o?/\.HC\b/g:/\.HC\b[^]+?}\s?/g,"").trim(),Nn.an.setItem("findCSS",l.length+"\n"+l),Nn.an.removeItem("omniCSS"),$t(Nn.on("userDefinedCss"),n)});var r},Ht=function(n){var t,e,r=n?n.split(/^\/\*\s?#!?([A-Za-z:]+)\s?\*\//m):[""],i={ui:r[0].trim()};for(t=1;t<r.length;t+=2)i[e=r[t].toLowerCase()]=(i[e]||"")+r[t+1].trim();return i},Pt=function(n){var t=(n=n.slice(n.indexOf("\n")+1)).indexOf("\n")+1,e=n.indexOf("\n",t);return{c:n.slice(0,t-1),s:n.slice(t,e).replace("  ","\n"),i:n.slice(e+1)}},$t=function(n,e){var r,u,o,l,a,f,c,s,d,_,v,g,m,p=Nn.an.getItem("innerCSS"),b=p.indexOf("\n");if(p=b>0?p.slice(0,b):p,u=(r=Ht(n)).ui?p+"\n"+r.ui:p,o=r["find:host"],l=r.find,a=r.omni,f="omniCSS",b=(p=Nn.an.getItem("findCSS")).indexOf("\n"),c=(p=p.slice(0,b+1+ +p.slice(0,b))).indexOf("\n",p.indexOf("\n",b+1)+1),s=p.lastIndexOf("  ",c),o=o?"  "+o.replace(/\n/g," "):"",(s>0?p.slice(s,c)!==o:o)&&(p=(p=p.slice(b+1,s>0?s:c)+o+p.slice(c)).length+"\n"+p),l=l?p+"\n"+l:p,p=(Nn.an.getItem(f)||"").split("\n",1)[0],a=a?p+"\n"+a:p,-1===e)return{ui:u.slice(Nt.length),find:Pt(l),omni:a};if(Nn.an.setItem("innerCSS",u),Nn.an.setItem("findCSS",l),a?Nn.an.setItem(f,a):Nn.an.removeItem(f),At(0,u),0!==e&&1!==e){for(_ in d={N:12,H:i,f:t},dt)for(g=(v=dt[+_]).length;0<--g;)4&(m=v[g].s).f&&(v[g].postMessage(d),m.f|=32);Nn.dn({N:47,d:{c:Hn.c}})}};Nn.mn.userDefinedCss=$t,Nn.kn=At,(i=Nn.an.getItem("innerCSS")||"")&&i.startsWith(Nt)?(Nn.an.removeItem("vomnibarPage_f"),At(1,i)):At(0,i),g={__proto__:null,atob:8,base64:8,btoa:9,base64encode:9,decode:1,decodeuri:1,decodeurl:1,decodecomp:2,encode:10,encodecomp:11,unescape:3,upper:4,lower:5,normalize:6,reverse:7},p=null,b=function(n){var t,e,i,u,o,l,a,f,c,s,d,_,v,m,p,b,U,h=[];for(t=0,e=n.split("\n");t<e.length;t++)if(i=(i=e[t]).trim(),(u=/^([a-z]{1,6})([^\x00- A-Za-z\\])/.exec(i))&&(o="\\u"+(u[2].charCodeAt(0)+65536).toString(16).slice(1),l=u[1],a=new RegExp("^((?:\\\\"+o+"|[^"+o+"])+)"+o+"(.*)"+o+"([a-zD]{0,9})((,[A-Za-z]+|,host=[\\w.*-]+)*)$").exec(i.slice(u[0].length)))){for(c=(f=a[3]).replace(/[dDr]/g,""),s=[],d=null,_=+f.includes("r"),f.includes("d")?s.push(2):f.includes("D")&&s.push(1),v=0,m=a[4].toLowerCase().split(",");v<m.length;v++)(p=m[v]).startsWith("host=")?d=p.slice(5):"matched"===p?_=1:(b=g[p]||0)&&s.push(b);(U=r.Ue(a[1],_?c.replace("g",""):c))&&h.push({gt:y(l),mt:d,pt:U,bt:_,Bt:s,Ut:B(a[2])})}return h},B=function(n){return n.replace(/\\(x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|.)/g,function(n,t){return"x"===t[0]||"u"===t[0]?"$"===(t=String.fromCharCode(parseInt(t.slice(1),16)))?t+t:t:"t"===t?"\t":"r"===t?"\r":"n"===t?"\n":"0"===t?"$&":t>="1"&&t<="9"?"$"+t:t})},U=function(n){var t=n.sed,e=n.sedKeys||n.sedKey;return null!=t||e?t&&"object"==typeof t?null!=t.r||t.k?t:null:{r:t,k:e}:null},y=function(n){var t,e,r=0;for(t=0;t<n.length;t++)r|=(e=-33&n.charCodeAt(t))<65||e>90?0:83===e?32772:1<<e-65;return r},w=function(n){var t,e;for(t=0,e=p||[];t<e.length;t++)if(e[t].gt&n)return true;return!p},C=function(n,t,e){var i,u,o,l,a,f,c,s=!e||"object"!=typeof e,d=s?e:e.r;if(false===d)return n;for(i=p||(p=b(Nn.on("clipSub"))),d&&true!==d&&(d=(d+"").replace(/(?!\\) ([a-z]{1,6})(?![\x00- A-Za-z\\])/g,"\n$1"),i=i.concat(b(d))),t=!s&&e.k?y(e.k):t,o="",a=function(e){var i,a,f,c,s,d,_;if(e.gt&t&&(!e.mt||(o=""!==o?o:(u=r.re(n))&&u.host.toLowerCase())&&((l=2*+e.mt.endsWith(".*")+ +e.mt.startsWith("*."))>2?("."+o+".").includes(e.mt.slice(1,-1)):l>1?(o+".").startsWith(e.mt.slice(0,-1)):l?("."+o).endsWith(e.mt.slice(1)):o===e.mt))){if(i=-1,e.bt?(a=0,n.replace(e.pt,function(n){var t=arguments;return i=(a=t[t.length-2])+n.length,f=t.length>3?t[1]:"",""}),i>=0&&(c=n.replace(e.pt,e.Ut),n=c.slice(a,c.length-(n.length-i))||f||n.slice(a,i))):e.pt.test(n)&&(i=e.pt.lastIndex=0,n=n.replace(e.pt,e.Ut)),i<0)return"continue";for(o="",s=0,d=e.Bt;s<d.length;s++)n=1===(_=d[s])?r.Se(n):2===_?r.de(n):3===_?B(n):4===_?n.toLocaleUpperCase():5===_?n.toLocaleLowerCase():10===_?r.encodeAsciiURI(n):11===_?r.encodeAsciiComponent(n):8===_?r.K(n,"atob"):9===_?btoa(n):(n=6!==_&&7!==_||false?n:n.normalize(),7===_?(Array.from?Array.from(n):n.split("")).reverse().join(""):n)}},f=0,c=i;f<c.length;f++)a(c[f]);return r.y(),n},k=function(){var n=document.createElement("textarea");return n.style.position="absolute",n.style.left="-99px",n.style.width="0",n},T=function(n,t,e){"string"!=typeof n&&(n="json"===t?JSON.stringify(n,null,2):n.join(t!==!!t&&t||"\n")+(n.length>1&&(!t||t===!!t)?"\n":""));var i=(n=n.replace(r.F," ").replace(/[ \t]+(\r\n?|\n)|\r\n?/g,"\n")).charCodeAt(n.length-1);return 32!==i&&9!==i||((i=n.lastIndexOf("\n")+1)?n=n.slice(0,i)+n.slice(i).trimRight():32!==(i=n.charCodeAt(0))&&9!==i&&(n=n.trimRight())),C(n,4,e)},I=function(n,t){return n&&(n=n.replace(r.F," "),n=C(n,32768,t)),n},R=function(n,t,e){if(n=T(n,t,e)){var r=document,i=k();i.value=n,r.documentElement.appendChild(i),i.select(),r.execCommand("copy"),i.remove(),i.value=""}return n},x=Nn.E.zn?function(n,t){var e,i=k();return i.maxLength=t||102400,document.documentElement.appendChild(i),i.focus(),document.execCommand("paste"),e=i.value.slice(0,t||102400),i.value="",i.remove(),i.removeAttribute("maxlength"),t||"data:"!==e.slice(0,5).toLowerCase()&&!r.$(e)?I(e,n):r.we(n,20971520)}:function(){return null},r.pe=R,r.we=x,r.be=C,Nn.mn.clipSub=function(){p=null},M=function(n,t){return"before"===t?n.index:"start"===t||"begin"===t?0:"after"!==t&&t?void 0:n.index+1},S=function(n,t,e,i){if(i instanceof Promise)i.then(S.bind(0,n,t,e));else switch(r.y(),i[1]){case 1:Vt(i[0],15);break;case 5:case 6:t.$p||6===i[1]?n=0:(t=r.r(r.L(),t)).$p=1,En=t,E(r.V(i[0]),n,e);break;case 4:n>=3&&a.ht(i[0])}},V=function(n,t,e,r,i){var u,o=r&&i.filter(function(n){return n.id===r.windowId})[0],l=null!=o&&o.incognito;!e.window&&(l||(i=i.filter(function(n){return n.incognito&&"normal"===n.type})).length>0)?(u={url:n,active:t,windowId:l?r.windowId:i[i.length-1].id},l&&(u.index=M(r,e.position),e.opener&&(u.openerTabId=r.id)),ct(u,zn),!l&&t&&lt(u)):st({url:n,incognito:true,focused:t},o&&"normal"===o.type?o.state:"")},D=function(n){return null==n?-1:"string"!=typeof n?0|n:"reuse"===n?1:"newWindow"===n?2:"newFg"===n?-1:"newBg"===n?-2:"lastWndFg"===n?-5:"lastWndBg"===n?-6:"current"===n?0:-1},N=function(n,t,e){var i,u,o,l,a,f,c,s,d=t&&t.length>0?nt(t[0]):"",_=[e,Fn().host_mask||Fn().host_mark,Fn().tabid_mask||Fn().tabId_mask||Fn().tabid_mark,Fn().title_mask||Fn().title_mark,Fn().id_mask||Fn().id_mark||Fn().id_marker],v=[];for(i=0;i<_.length;i++)(o=(u=null!=_[i]?_[i]+"":"")?n.indexOf(u):-1)>=0&&v.push([o,o+u.length,0===i?/[%$]s/.test(u)?r.encodeAsciiComponent(d):d:1===i?new URL(d).host:2===i?d&&""+t[0].id:3===i?d&&""+r.encodeAsciiComponent(t[0].title):Wn.runtime.id]);if(v.length){for(l="",a=0,v.sort(function(n,t){return n[0]-t[0]}),f=0,c=v;f<c.length;f++)l=l+n.slice(a,(s=c[f])[0])+s[2],a=s[1];n=l+n.slice(a)}return n},A=function(n,t,e,i){var u,o=i[0],l=!!o&&o.incognito,a=e.incognito,f=-2!==t&&-6!==t,c=2===t||t<-4||e.window;if(r.P(n))(l||2===m.ft)&&(c=true);else if(l){if(false!==a)return void V(n,f,e,o,[{id:o.windowId,incognito:true,type:"normal",state:"normal",focused:true}]);c=true}else if(a)return void it(V.bind(null,n,f,e,o));if(c)return t<-4&&m.yt>=0?void Zn.create({windowId:m.yt,active:t>-6,url:n&&1!==Nn.q.get(n)?n:void 0},function(){if(Xn())return A(n,2,e,i),Xn()}):void rt(false,function(t){var e=t.state;st({url:n,focused:f},"minimized"!==e&&"docked"!==e?e:"")});u={url:n,active:f,windowId:o?o.windowId:void 0,openerTabId:e.opener&&o?o.id:void 0,pinned:!!e.pinned,index:o?M(o,e.position):void 0},ct(u,zn)},H=function(n,t){if(!"void 0;void(0);".includes(n.slice(11).trim())){if(!t&&jn){if(Rt(jn,{N:5,u:n}))return;jn=null}var e=function(e){if(-1===e||Xn()){var i=r.K(n.slice(11));return Zn.executeScript({code:i},function(){return Xn()&&t&&t(),Xn()}),Xn()}};f<71?Zn.update({url:n},e):e(-1)}},P=function(n,t,e,r){var i,u,o,l=Nn.E.Hn;return!(n.length<l.length+3||!n.startsWith(l))&&(r?((n=n.slice(l.length)).startsWith("#!image ")&&2===m.ft&&(n="#!image incognito=1&"+n.slice(8).trim()),i=r.incognito,Nn.He.Xe=(u=[n,null,0])[1]=function(){return clearTimeout(u[2]),Nn.He.Xe=null,u[0]},u[2]=setTimeout(function(){u[0]="#!url vimium://error (vimium://show: sorry, the info has expired.)",u[2]=setTimeout(function(){Nn.He.Xe===u[1]&&(Nn.He.Xe=null),u[0]="",u[1]=null},2e3)},1200),zn=1,0!==t||i?i?at({url:l,active:-2!==t}):A(l,t,e,[r]):(o=f>=54&&!r.url.split("#",2)[1]?Wn.extension.getViews({tabId:r.id}):[]).length>0&&o[0].location.href.startsWith(l)&&o[0].onhashchange?o[0].onhashchange():Zn.update(r.id,{url:l}),true):(tt(function(r){if(!r||r.length<=0)return Xn();P(n,t,e,r[0])}),true))},$=function(n){var t,e,i,u,o,l,a,f,c=n&&n[0],s=c&&c.windowId,d=Fn().urls,_=zn;if(!Fn().wt){for(t=0;t<d.length;t++)d[t]=r.V(d[t]+"");Fn().wt=1}e=D(Fn().reuse),i=!!Fn().pinned,u=2===e||Fn().window?{url:d.length>0?d:void 0,incognito:!!Fn().incognito}:null,o=e>-2,l=c&&M(c,Fn().position),En=null;do{if(u)Jn.create(u,Xn);else for(a=0,f=d;a<f.length;a++)at({url:f[a],index:l,windowId:s,active:o,pinned:i}),o=false,null!=l&&l++}while(0<--_);return Xn()},E=function(n,t,e){var i,u,o,l,a,f,c;"string"!=typeof n||(n||9!==t?(i=Fn().url_mask,u=Fn().url_mark,null==i&&null==u||(n=N(n,e,null!=i?i:u)),9!==t&&(o=(Fn().keyword||"")+"",n=(null!=(l=Fn().testUrl)?l:!o)?r.V(n,o,t):r.ee(n.trim().split(r.O),o||"~")),(a=Fn().goNext)&&n&&"string"==typeof n&&(n=C(n,8192),n=F(n,zn,a)[1])):n=Nn.ce.newTabUrl_f),f=Fn(),c=D(f.reuse),En=null,r.y(),"string"!=typeof n?S(t,f,e,n):P(n,c,f)||(r.$(n)?H(n):1===c?W({u:n}):0===c?ft(n):e?A(n,c,f,e):tt(A.bind(null,n,c,f)))},z=function(t,e){var i,u,o,l,a,f;null!==e?(e=e.trim())?(r.G.test(e)?e=e.slice(1,-1):(i=Fn().keyword)&&"~"!==i&&!Fn().testUrl||(e=r.ae(e)),(u=e.indexOf("://")+3)>3&&r.D.test(e)&&(o=void 0,l=e.indexOf("/",u)+1||e.length,a=e.slice(u,l),e=(f=a.startsWith("0.0.0.0")?7:a.includes(":::")&&(o=/^(\[?::\]?):\d{2,5}$/.exec(a))?o[1].length:0)?e.slice(0,u)+(f>6?"127.0.0.1":"[::1]")+e.slice(u+f):e),E(e,2,t)):Vt(n("noCopied")):Dt("read clipboard")},F=function(n,t,e){var r=false;return n=n.replace(/\$(?:\{(\d+)[,\/#@](\d*):(\d*)(:-?\d*)?\}|\$)/g,function(n,i,u,o,l){var a,f,c,s,d;return"$$"===n?"$":(r=true,f=i&&parseInt(i)||1,c=u&&parseInt(u)||0,s=o&&parseInt(o)||0,(d=l&&parseInt(l.slice(1))||1)<0&&(c=(a=[s,c])[0],s=a[1]),t*=d,f="absolute"!==e?f+t:t>0?c+t-1:t<0?s+t:f,""+Math.max(c||1,Math.min(f,s?s-1:f)))}),[r,n]},O=function(n){var t,e,r;if(Fn().urls)Fn().urls instanceof Array&&(n&&n.length>0?$(n):tt($));else{if((null!=Fn().url_mask||null!=Fn().url_mark)&&!n)return Xn()||void tt(O);if(t=U(Fn()),Fn().url)e=Fn().url+"",t&&(e=C(e,32768,t)),E(e,3,n);else if(Fn().copied){if((e=x(t))instanceof Promise)return void e.then(z.bind(null,n));z(n,e)}else r=Fn().url_f,t&&"string"==typeof r&&r&&(r=C(r,32768,t)),E(r||"",9,n)}},L=function(n,t){var e,i,u,o,l,a,f,c,s;r.T(n),e=null!=t&&It(t,true),jn=e?t:wt(t)||jn,i=n.u,o=(n.k||"")+"",a=null!=(l=n.t)?l:!o,c=n.r,(u=r.L()).reuse=null==(f="reverse"===n.i?jn?!jn.s.a:null:n.i)||c&&"current"!==c||jn&&f===jn.s.a?c:-1,u.incognito=f,u.sed=n.e,i?(":"===i[0]&&e&&/^:[bdhostw]\s/.test(i)&&((i=i.slice(2).trim())||(e=false)),n.f||(a?(e||(i=C(i,16384,n.e)),i=r.je(i),i=r.V(i,o,e?-1:3),s=r.B,null==n.h||2!==s&&1!==s?e&&3===s&&i.startsWith("vimium:")&&(i=r.V(i)):i=(n.h?"https":"http")+i.slice("s"===i[4]?5:4)):i=r.ee(i.trim().split(r.O),o||"~")),u.opener=e?!n.n:Nn.ce.vomnibarOptions.actions.includes("opener"),u.url_f=i):(u.copied=n.c,u.keyword=o,u.testUrl=l),u.position=n.p,zn=1,En=u,O()},q=[function(n){if(2!==m.ft&&n&&(n=n.filter(function(n){return!n.incognito})),!(n&&n.length>0))return tt(q[1].bind(this)),Xn();rt(false,q[2].bind(this,n))},function(n){var t=this.s?q[3].bind(this,0):null;n.length<=0||2===m.ft&&!n[0].incognito?st({url:this.u},"",t&&function(n){n.tabs&&n.tabs.length>0&&t(n.tabs[0])}):at({index:n[0].index+1,url:this.u,windowId:n[0].windowId},t)},function(n,t){var e,r=t.id,i=this.u,u=n.filter(function(n){return n.windowId===r});u.length<=0&&(u=t.incognito?n:n.filter(function(n){return!n.incognito})).length<=0?tt(q[1].bind(this)):(this.p&&u.sort(function(n,t){return n.url.length-t.url.length}),(e=ut(u)).url.length>u[0].url.length&&(e=u[0]),!i.startsWith(Nn.E.Nn)||dt[e.id]||this.s?(Zn.update(e.id,{url:e.url===i||e.url.startsWith(i)?void 0:i,active:true},this.s?q[3].bind(this,0):null),e.windowId!==r&&lt(e)):(at({url:i}),Zn.remove(e.id)))},function(n,t){var e=this;if(!t)return Xn();"complete"===t.status||n>=2?j.Ct(this,t):setTimeout(function(){Yn(t.id,q[3].bind(e,n+1))},800)}],K=function(n,t,e,r){e&&2!==e.s.s?e.postMessage({N:7,H:r||5!==n.c?Tt(t.s):null,m:r?4:0,k:r?$n:0,c:n.c,n:n.n,a:n.a}):(n.a.$forced=true,St(t,n.c,false,n.a,n.n))},W=function(n,t,e){var i,u=r.ze(n.u.split("#",1)[0]),o=q[0];e||!u.startsWith("file:")&&!u.startsWith("ftp:")||u.includes(".",u.lastIndexOf("/")+1)?(n.p&&(u+="*"),i=o.bind(n)):(u+="/",i=function(t){t&&t.length>0?o.call(n,t):W(n,null,true)}),Zn.query({url:u,windowType:"normal"},i)},Z=function(){var n,t=jn,e=-1,r=dt[t.s.t];if(r&&r.length>2){for(e=Math.max(0,r.indexOf(t,1)),n=Math.abs(zn);n>0;n--)(e+=zn>0?1:-1)===r.length?e=1:e<1&&(e=r.length-1);t=r[e]}xt(t,0===t.s.i,t!==jn&&r&&t!==r[0]?3:2)},J=function(){var n,t,e,r,i=jn.s,u=i.t>=0&&dt[i.t]?null:"Vimium C can not access frames in current tab";u&&Vt(u),i.i&&Qn()?(t=n=i.i,r=zn,Qn().getAllFrames({tabId:i.t},function(u){var o,l,a,f;do{for(e=false,o=0,l=u;o<l.length;o++)if((a=l[o]).frameId===t){e=(t=a.parentFrameId)>0;break}}while(e&&0<--r);(f=t>0&&t!==n?kt(i.t,t):null)?xt(f,true,4):un()})):un()},G=function(){var n=jn.s,e=zn<0?-zn:zn,r=Fn().index,i=r?"other"===r?e+1:"count"===r?e:r>=0?-1-(0|r):0:0,u=!!i||!Fn().active,o=null;32&n.f||(n.f|=32,o=t),Mt(1,true,{n:i>0?zn/e:zn,l:u,f:o,m:!!Fn().highlight,r:true===Fn().returnToViewport,s:!i&&e<2&&!!Fn().selected,p:!!Fn().postOnEsc,q:u||Fn().last?h.kt(n.a,"",i<0?-i:i):""})},Q=function(n,t){var e="helpDialog";Promise.all([r.me("HelpDialog"),e in Nn.ce||new Promise(function(n){Nn.yn(e,function(t){Nn.in(e,t),n()})})]).then(function(e){var r=n.w&&kt(t.s.t,0)||t,i=r.s.u.startsWith(Nn.E.Nn),u=n.a||{};r.s.f|=8,jn=r,Mt(17,true,{h:e[0].Tt(i),o:Nn.E.Nn,e:!!u.exitOnClick,c:Nn.on("showAdvancedCommands",true)||i&&0!==Nn.He.Ke})},null)},X=function(n){var t,e,i,u,o,l,a,f,c,s=jn,d=Fn().url;null!=d&&true!==d&&"string"!=typeof d&&(d=null,delete Fn().url),(s||(s=kt(m.vt,0),jn=s,s))&&(e=s.s.u,i=!(t=Nn.ce.vomnibarPage_f).startsWith(v),u=e.startsWith(v),o=n||!t.startsWith(location.origin)?Nn.E._n:t,l=(n=n||(i?u||t.startsWith("file:")&&!e.startsWith("file:///")||t.startsWith("http:")&&!/^http:/.test(e)&&!/^http:\/\/localhost[:/]/i.test(t):s.s.a||u&&!t.startsWith(e.slice(0,e.indexOf("/",e.indexOf("://")+3)+1))))||t===o||s.s.t<0,a=Fn().trailingSlash,f=Fn().trailing_slash,"bookmark"===(c=r.r(r.T({v:l?o:t,i:l?null:o,t:l?0:i?2:1,s:null!=a?!!a:null!=f?!!f:null,j:l?"":Nn.E.Gn,e:!!Fn().exitOnClick,d:U(Fn()),k:Kn()}),Fn())).mode&&(c.mode="bookm"),St(s,7,true,c,zn),c.k=-1,En=c)},Y=function(){var n=Fn().mode,e="string"==typeof n?n.toLowerCase():"",r=jn.s,i=null,o="",l=null,a=null;16&~r.f&&(o=u,32&r.f||(r.f|=32,i=t),l=c.It,a=c.Rt,r.f|=16),Mt(6,true,{m:"caret"===e?3:"line"===e?2:1,f:i,g:a,k:l,t:!!Fn().richText,s:!!Fn().start,w:o})},tn=function(n){var t=Fn().show,e=Math.min(Math.max(0|Fn().jpeg,0),100),r=n&&n[0]?n[0].id:m.vt,i=n&&n[0]?n[0].title:"";i="title"===Fn().name||!i||r<0?i||""+r:r+"-"+i,i+=e>0?".jpg":".png",Zn.captureVisibleTab(e>0?{format:"jpeg",quality:e}:{format:"png"},function(n){var e,r;if(!n)return Xn();e=function(n){"string"!=typeof n&&(n=URL.createObjectURL(n)),n.startsWith("blob:")&&(nn&&(clearTimeout(nn[0]),URL.revokeObjectURL(nn[1])),nn=[setTimeout(function(){nn&&URL.revokeObjectURL(nn[1]),nn=null},6e4),n]),t&&en({u:n,f:i,a:false,e:null,r:-1},jn);var e=document.createElement("a");e.href=n,e.download=i,e.target="_blank",e.click()},n.startsWith("data:")?f>=48?fetch(n).then(function(n){return n.blob()}).then(e):((r=new XMLHttpRequest).open("GET",n,true),r.responseType="blob",r.onload=function(){e(this.response)},r.send()):e(n)})},en=function(t,e){var i,u=t.u;if(!r.re(u))return jn=e,void Vt(n("invalidImg"));i=Nn.E.Hn+"#!image ",t.f&&(i+="download="+r.encodeAsciiComponent(t.f)+"&"),false!==t.a&&(i+="auto=once&"),u=t.e?C(u,32768,t.e):u,P(i+u,t.r,{opener:true})},rn=function(t,e,r){var i,u,o,l,a,c=r?r.id:e.s.t,s=t.s,d=D(t.r||0),_=false;if(f<72){if((r?nt(r):(e.s.i?kt(c,0):e).s.u).startsWith(v)&&!0)return jn=e,void Vt(n("noTabHistory"));_=true}if(i=function(n,t){Zn.executeScript(n.id,{code:"history.go("+t+")",runAt:"document_start"},Xn)},d)u=t.p,Zn.duplicate(c,function(n){var t,e;if(!n)return Xn();-2===d&&ot(c),_?i(n,s):rn({s:s,r:0},null,n),t=n.index--,null!=(e="end"===u?3e4:M(n,u))&&e!==t&&Zn.move(n.id,{index:e},Xn)});else if(o=s>0?Zn.goForward:Zn.goBack)for(l=0,a=s>0?s:-s;l<a;l++)o(c,Xn);else i(r,s)},un=function(){var n=jn?jn.s.t:m.vt,t=kt(n,0);t&&xt(t,true,dt[n][0]===t?2:4)},on=function(n,t){var e,i,u,o,l,a,f,c,s,d=Hn.s;if(n.o||!Nn.He.Qe)if(o=(u=d&&" "+d+" ").includes(i=" "+n.t+" "),e=(e=(l=null!=n.e?n.e:o)?o?d:d+i:u.replace(i," ")).trim().replace(r.O," "),false!==n.b){if(n.o&&(Nn.He.Qe=l!==(" "+Nn.ce.vomnibarOptions.styles+" ").includes(i)),e!==d)for(Hn.s=e,a={N:47,d:{s:e}},f=0,c=_t;f<c.length;f++)(s=c[f])!==t&&s.postMessage(a)}else Hn.s=e},ln=function(n,t){var e,r,i,u,o,l,a=Fn().patterns,f=false;if(a&&a instanceof Array||(a=(a=a&&"string"==typeof a?a:(f=true,n?Nn.ce.nextPatterns:Nn.ce.previousPatterns)).split(",")),f||!Fn().$n){for(e=[],r=0,i=a;r<i.length&&((u=(u=i[r])&&(u+"").trim())&&e.push(".#[".includes(u[0])?u:u.toLowerCase()),200!==e.length);r++);a=e,f||(Fn().patterns=a,Fn().$n=1)}o=a.map(function(n){return Math.max(n.length+12,4*n.length)}),l=Math.max.apply(Math,o),Mt(11,true,{r:Fn().noRel?"":t,n:n,match:Fn().match,p:a,l:o,m:l>0&&l<99?l:32})},fn=0,cn=function(t,e){var r=n("cmdConfirm",[e,n(t)]),i=Date.now(),u=window.confirm(r);return Math.abs(Date.now()-i)>9?u?e:0:1},sn=function(n){var t=an;an=null,n>1&&t&&t(n<3)},dn=function(n){fn&&clearTimeout(fn),fn=n},_n=function(n,t){var e=n.c,r=n.i;r>=-1&&fn!==r||(dn(0),n.r?sn(n.r):_(c.xt.get(e),n.n,0,t,0))},vn=function(n,t){var e,i,u,o,l,a;if(dn(0),t)return e=t[0],dn(setTimeout(vn,100,n,null)),e.postMessage({N:13,c:n,i:fn,m:""}),6&e.s.f||s[10]({},e),void(e.s.f|=2);o=0,"goBack"===(u=(i=c.xt.get(n)).Mt)||"goForward"===u?o=20:"autoOpen"===u&&(o=11),o&&(i={St:o,Vt:1,Mt:u,Dt:null,Nt:i.Nt,At:i.At}),i.Vt&&(i.St>9||i.St<1?_(i,1,0,null,0):(l=i.Nt)&&l.$noWarn||(a=i.Nt=r.L(),l&&r.r(a,l),a.$noWarn=true,console.log("Error: Command",u,"must run on pages which are not privileged")))},gn=Math.abs,mn=function(n,t,e,r){var i,u,o=zn;return r&&(o+=o>0?r:-r),u=o>0,(i=n+o)<=t&&i>-2?u?[n,i]:[i+1,n+1]:!Fn().limited&&gn(o)<2*(e||t)?gn(o)<t?u?[t-o,t]:[0,-o]:[0,t]:u?[n,t]:[0,n+1]},pn=function(){jn&&xt(jn,false,0)};bn=function(n,t){var e,i=n.u||n.s;if(n.d)if("string"!=typeof i)for(e=i.length;0<=--e;)i[e]=r.Se(i[e]+"");else i=r.Se(i);else i.length<4&&!i.trim()&&" "===i[0]&&(i="");i=i&&R(i,n.j,n.e),jn=t,i=n.s&&"object"==typeof n.s?"["+n.s.length+"] "+n.s.slice(-1)[0]:i,Vt(n.d?i.replace(/%[0-7][\dA-Fa-f]/g,decodeURIComponent):i,n.u?14:15)},Bn=function(){var t=!!(Fn().decoded||Fn().decode),e=Fn().type,i=U(Fn());"frame"===e&&jn?64&jn.s.f?jn.postMessage({N:3,H:16,d:t,e:i}):yt({H:16,u:"",d:t,e:i}):Zn.query("browser"===e?{windowType:"normal"}:{active:"window"!==e&&("tab"!==e||gn(zn)<2)||void 0,currentWindow:true},function(u){var o,l,a,f,c,s,d,_,v,g;e&&"title"!==e&&"frame"!==e&&"url"!==e?(o=jn?jn.s.a:2===m.ft,l=Fn().format,a=""+(l||"${title}: ${url}"),f=Fn().join,c="json"===f&&!l,s=/\$\{([^}]+)\}/g,"tab"===e?(d=u.length<2?0:ut(u).index,_=mn(d,u.length),u=u.slice(_[0],_[1])):(u=u.filter(function(n){return n.incognito===o})).sort(function(n,t){return n.windowId-t.windowId||n.index-t.index}),v=u.map(function(n){return c?{title:n.title,url:t?r.Se(nt(n)):nt(n)}:a.replace(s,function(e,i){return t&&"url"===i?r.Se(nt(n)):"__proto__"!==i&&n[i]||""})}),g=R(v,f,i),Vt("tab"===e&&u.length<2?g:n("copiedWndInfo"),15)):bn({u:"title"===e?u[0].title:nt(u[0]),d:t,e:i},jn)})},Un=function(){var t="hasIncog",e=!!Fn().incognito;e&&(jn?jn.s.a:2===m.ft)?Vt(n(t)):rt(true,e?function(e){var i,u,o;if(!e)return Xn();if(i=ut(e.tabs),e.incognito&&i.incognito)return Vt(n(t));if(u={tabId:i.id,incognito:true},o=nt(i),i.incognito);else{if(e.incognito)return r.P(o)?Vt(n(t)):(++i.index,a.Ht(i));if(r.P(o))return Dt(n("openIncog"));u.url=o}e.tabs=null,it(function(n){var t,r;(n=n.filter(function(n){return n.incognito&&"normal"===n.type})).length?Zn.query({windowId:n[n.length-1].id,active:true},function(n){var t=n[0],e=u.tabId,r=u.url;"string"!=typeof r||r&&1!==Nn.q.get(r)||(r=void 0),Zn.create({url:r,index:t.index+1,windowId:t.windowId}),lt(t),Zn.remove(e)}):(r="normal"===e.type?e.state:"",u.url&&(t=u.tabId,u.tabId=void 0,Nn.E.qn&&(u.focused=true,r="")),st(u,r,t?null:pn),t&&Zn.remove(t))})}:function(t){var e,r,i,u,o,l,a,c;if(!t)return Xn();if(r=(e=t.tabs).length,(i=!!Fn().all)||!(r<=1)){if(u=ut(e),o=u.incognito,l=u.index,i)a=[0,c=r];else{if((c=(a=mn(l,r))[1]-a[0])>=r)return Vt(n("moveAllTabs"));if(c>30){if(!(c=cn("moveTabToNewWindow",c)))return;c<2&&(a=[l,l+1])}}st({tabId:e[l].id,incognito:o},"normal"===t.type?t.state:"",c<2?pn:function(n){var r,i,u,c,s,d,_,v,g;for(pn(),r=e.slice(a[0],l),i=e.slice(l+1,a[1]),t.incognito&&f<52&&(r=r.filter(u=function(n){return n.incognito===o}),i=i.filter(u)),s=i.length,d=function(n){return n.id},(c=r.length)&&(Zn.move(r.map(d),{index:0,windowId:n.id},Xn),c>1&&Zn.move(e[l].id,{index:c})),s&&Zn.move(i.map(d),{index:c+1,windowId:n.id},Xn),_=0,v=e;_<v.length;_++)(g=v[_]).pinned&&Zn.update(g.id,{pinned:true})})}})},hn=function(n){var t,e,r,i,u,o={bypassCache:true===(Fn().hard||Fn().bypassCache)},l=Zn.reload;if(!n||n.length<1)n&&rt(true,function(n){return n&&n.tabs.length&&hn(n.tabs),Xn()});else if(gn(zn)<2)l(ut(n).id,o);else{if(t=ut(n).index,r=(e=mn(t,n.length))[0],i=e[1],Fn().single&&(r=t=t+1===i||zn>0&&r!==t?r:i-1,i=t+1),(u=i-r)>20){if(!(u=cn("reloadTab",u)))return;1===u&&(r=t,i=t+1)}for(l(n[t].id,o);r!==i;r++)r!==t&&l(n[r].id,o)}},yn=function(n,t){var e,r,i,u,o,l,a,f,c,s,d,_,v,g,p=Fn().highlighted;if(n){if(!t||!t.length)return Xn();if(r=t.length,i=ut(t),o=1,l=u=i.index,a=u+1,gn(zn)>1&&r>1){if(f=0,t[0].pinned!==i.pinned&&!(zn<0&&t[u-1].pinned))for(;t[f].pinned;)f++;if((o=(c=mn(u,r-f,r))[1]-c[0])>20&&!(o=cn("removeTab",o)))return;o>1&&(l=f+c[0],a=f+c[1])}else if(p&&(d="no-current"===p,(o=(s=t.filter(function(n){return n.highlighted})).length)>1&&(d||o<r)&&(Zn.remove(s.filter(function(n){return n!==i}).map(function(n){return n.id}),Xn),o=1),d))return;!l&&o>=r&&true!==(null!=Fn().mayClose?Fn().mayClose:Fn().allow_close)?n<2?et(yn.bind(null,2)):it(wn.bind(null,i,t)):(n<2&&(l=i.index=0,a=1),_=Fn().goto||(Fn().left?"left":""),-2===(v=o>=r?r:"left"===_?l>0?l-1:a:"right"===_?a<r?a:l-1:"previous"===_?-2:r)&&(v=(g=a<r&&!m.Pt.has(t[a].id)?t[a]:t.filter(function(n,t){return(t<l||t>=a)&&m.Pt.has(n.id)}).sort(m.$t)[0])?g.index:r),v>=0&&v<r&&ot(t[v].id),Cn(i,t,l,a))}else((e=gn(zn)>1||p||Fn().goto||Fn().left)?et:tt)(yn.bind(null,e?2:1))},wn=function(n,t,e){var i,u,o=false;e=e.filter(function(n){return"normal"===n.type}),"always"===Fn().keepWindow?o=!e.length||e.some(function(t){return t.id===n.windowId}):e.length<=1?(o=true,(u=e[0])&&(u.id!==n.windowId?o=false:u.incognito&&!r.P(Nn.ce.newTabUrl_f)&&(i=u.id))):n.incognito||1===(e=e.filter(function(n){return!n.incognito})).length&&e[0].id===n.windowId&&(i=e[0].id,o=true),o&&at({index:t.length,url:"",windowId:i}),Cn(n,t,0,t.length)},Cn=function(n,t,e,r){var i,u,o;Zn.remove(n.id,Xn),u=t.slice(n.index+1,r),o=t.slice(e,n.index),zn<0&&(u=(i=[o,u])[0],o=i[1]),u.length>0&&Zn.remove(u.map(function(n){return n.id}),Xn),o.length>0&&Zn.remove(o.map(function(n){return n.id}),Xn)},kn=function(t){var e,i=nt(t[0]),u=Fn().reader,l=Fn().keyword;i.startsWith(v)?Dt(n(u?"noReader":"openExtSrc")):u&&l?(e=a.ge({u:i}))&&e.k===l?(En=r.r(r.T({keyword:""}),Fn()),E(e.u,0,t)):(i=r.V(e&&Fn().parsed?e.u:i,l),E(i,9,t)):u?o&&r.D.test(i)?(i=i.startsWith("read:")?r.K(i.slice(i.indexOf("?url=")+5)):"read://"+new URL(i).origin.replace(/:\/\/|:/g,"_")+"/?url="+r.encodeAsciiComponent(i),E(i,9,t)):Dt(n("noReader")):(i=i.startsWith("view-source:")?i.slice(12):"view-source:"+i,E(i,9,t))},Tn=Math.abs,In=[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,3,0,1,3,0,0,0,3,0,1,0,2,3,0,3,1,0,0,0,1,0,0,1,0,2,1,1,0,3],Rn=[r.w,function(){var n=Fn().rel,t=n?n+"":"next",e=null!=Fn().isNext?!!Fn().isNext:!t.includes("prev")&&!t.includes("before"),i=U(Fn());i&&false!==i.r&&(i.k||w(8192))?Promise.resolve(ht(kt(jn.s.t,0))).then(function(n){var u=e?zn:-zn,o=n&&C(n,8192,i),l=o?F(o,u,!Fn().absolute||"absolute"):[false,n],a=l[1];l[0]&&a?(zn=u,En=r.r(r.T({url_f:a,goNext:false,sed:false}),Fn()),void 0===Fn().reuse&&(Fn().reuse=0),O()):ln(e,t)}):ln(e,t)},function(){var t,e=Fn().key,i=null!=(t=Fn().hideHUD)||null!=(t=Fn().hideHud)?!t:!Nn.ce.hideHud,u=e&&"string"==typeof e&&e.length>3?r.S(e):"";Mt(8,i,{h:i?n("5",[u&&": "+e]):null,k:u||null,i:!!Fn().insert,p:!!Fn().passExitKey,r:+!!Fn().reset,u:!!Fn().unhover})},Z,J,G,function(){var t,e,r,i=(Fn().key||"")+"",u="darkMode"===i?"d":"reduceMotion"===i?"m":Nn.un[i],o=u?An[u]:0,l=n("quoteA",[i]),a=Fn().value,f="boolean"==typeof a,c="";if(u?"boolean"==typeof o?f||(a=null):f||void 0===a?c=n(f?"notBool":"needVal",[l]):typeof a!=typeof o&&(c=JSON.stringify(o),c=n("unlikeVal",[l,c.length>10?c.slice(0,9)+"\u2026":c])):c=n(i in Nn.rn?"notFgOpt":"unknownA",[l]),c)Vt(c);else for(a=Nn.ln(u,a),t=dt[jn.s.t],e=1;e<t.length;e++)St(t[e],9,r=t[e]===t[0],{k:u,n:r?l:"",v:a},1)},function(){0!==jn.s.i||8&jn.s.f?(window.HelpDialog||r.me("HelpDialog"),Mt(17,true,Fn())):Q({a:Fn()},jn)},X,Y,function(){var n=Fn().folder||Fn().path,t=n?(n+"").replace(/\\/g,"/").split("/").filter(function(n){return n}):[];t.length?Wn.bookmarks.getTree(function(n){var e,r,i,u,o,l,a;if(!n)return Xn();for(r=(e=n[0].children).filter(function(n){return n.title===t[0]}),e=r.length?r:e.reduce(function(n,t){return n.concat(t.children)},[]),i=null,u=function(n){return(e=e.filter(function(t){return t.title===n})).length?(e=(i=e[0]).children)?void 0:"break":{value:Vt("The bookmark folder is not found.")}},o=0,l=t;o<l.length;o++){if("object"==typeof(a=u(l[o])))return a.value;if("break"===a)break}(zn*zn<2?tt:et)(function(n){var t,e,r,u,o,l,a,f;if(n&&n.length){if(t=ut(n).index,(o=(u=(e=mn(t,n.length))[1])-(r=e[0]))>20){if(!(o=cn("addBookmark",o)))return;1===o&&(r=t,u=t+1)}for(l=0,a=n.slice(r,u);l<a.length;l++)Wn.bookmarks.create({parentId:i.id,title:(f=a[l]).title,url:nt(f)},Xn);Vt("Add "+(u-r)+" bookmark"+(u>r+1?"s":"")+".")}else Xn()})}):Vt('Need "path" to a bookmark folder.')},function(){En=r.T({copied:true,keyword:Fn().keyword}),O()},tn,function(){e.Et(Fn(),jn)},function(){var t=jn?jn.s.a:2===m.ft;return h.jt(t),Vt(n("fhCleared",[t?n("incog"):""]))},function(){Fn().local?Fn().all?j.zt("#"):yt({H:18,u:"",a:2},true):j.zt()},Bn,function n(t){if(Fn().url||Fn().urls)return O(t),Xn();var e=null;return!t||t instanceof Array?t&&t.length>0&&(e=t[0]):(e=t,m.vt=e.id),!e&&m.vt>=0?(m.vt=-1,Yn(m.vt,n)):ct(e?{active:e.active,windowId:e.windowId,openerTabId:Fn().opener?e.id:void 0,index:M(e,Fn().position)}:{active:true},zn,Fn().evenIncognito),Xn()},function(t){var e,r,i,u,o,l,a;if(f<54&&Vt(n("noDiscardIfOld",[54])),e=ut(t).index,u=(r=Math.max(0,Math.min(e+zn,t.length-1)))>e?1:-1,(i=Tn(r-e))>20&&(i=cn("discardTab",i)),i)for(!(o=t[e+u]).discarded&&(i<2||o.autoDiscardable)&&Zn.discard(o.id,i>1?Xn:function(){var t=Xn();return t&&Vt(n("discardFail")),t}),l=2;l<=i;l++)!(a=t[e+u*l]).discarded&&a.autoDiscardable&&Zn.discard(a.id,Xn)},function(){var t,e=jn?jn.s.t:m.vt;if(e<0)return Dt(n("dupTab"));Zn.duplicate(e),zn<2||(t=function(n){ct({url:nt(n),active:false,windowId:n.windowId,pinned:n.pinned,index:n.index+2,openerTabId:n.id},zn-1)},f>=52||0===m.ft||Nn.E.qn?Yn(e,t):rt(true,function(n){var r,i=n&&n.tabs.filter(function(n){return n.id===e})[0];if(!i||!n.incognito||i.incognito)return i?t(i):Xn();for(r=zn;0<--r;)Zn.duplicate(e)}))},function(n){n.length&&rn({s:zn,r:Fn().reuse},null,n[0])},function(n){var t,e,r,i,u,o;if(!(n.length<2)){if(t=zn,e=n.length,(u=n[i=(i=Fn().absolute?t>0?Math.min(e,t)-1:Math.max(0,e+t):Tn(t)>2*n.length?t>0?-1:0:(r=ut(n)).index+t)>=0?i%e:e+(i%e||-e)]).pinned&&t<0&&Fn().noPinned&&(o=(r||ut(n)).index)>i&&!n[o-1].pinned){for(;n[i].pinned;)i++;u=n[i]}u.active||ot(u.id)}},function(){"frame"!==Fn().type&&jn&&jn.s.i&&(jn=kt(jn.s.t,0)||jn),yt({H:3,u:"",p:zn,t:Fn().trailingSlash,r:Fn().trailing_slash,s:U(Fn()),e:true})},function(){var n=Fn().sort,t=Fn().windows,e="current"===t,i=function(i){var u,o,l,a,c;f<46&&(i=i.filter(function(n){return"normal"===n.type||"popup"===n.type})),u=2===m.ft,i=e?i:i.filter(function(n){return n.incognito===u}),o=e?i:i.filter(function(n){return n.id===m.lt}),l=o.length?o[0]:null,(e||l)&&(a=function(t){var e,u,o,l,a,f,c,s,d,_,v,g,p,b=[],B=function(n){b.push(n)};if(i.sort(function(n,t){return n.id-t.id}).forEach(function(n){return n.tabs.forEach(B)}),b.length){if(n)if(e=m.vt,u=r.L(),n.includes("time")&&!n.includes("creat")||n.includes("recen")){for(o=0,l=b;o<l.length;o++)f=(a=l[o]).id,c=m.Pt.get(f),u[f]=f===e?2048:null!=c?c.i:f+2049;b.sort(function(n,t){return u[n.id]-u[t.id]})}else b.sort(function(n,t){return n.id-t.id});for(s=t?t.tabs.length:0,d=t?t.id:m.lt,_=0,v=b;_<v.length;_++)Zn.move((a=v[_]).id,{windowId:d,index:s++});for(g=0,p=b;g<p.length;g++)(a=p[g]).pinned&&Zn.update(a.id,{pinned:true})}},l&&"popup"===l.type&&l.tabs.length?(c=l.tabs[0].id,l.tabs=l.tabs.filter(function(n){return n.id!==c}),st({tabId:c,incognito:l.incognito},l.state,a)):(i=e||!l||n&&n.includes("all")||"all"===t?i:i.filter(function(n){return n.id!==l.id}),a(l)))};e?rt(true,function(n){return n?i([n]):Xn()}):it(f<46?{populate:true}:{populate:true,windowTypes:["normal","popup"]},i)},un,function(n){for(var t=ut(n),e=t.pinned,r=Math.max(0,Math.min(n.length-1,t.index+zn));e!==n[r].pinned;)r-=zn>0?1:-1;r!==t.index&&Zn.move(t.id,{index:r})},Un,function(n){var t=n[0];it(function(n){var e,r,i=t.windowId,u=false===Fn().minimized||false===Fn().min,o=n.filter(function(n){return n.incognito===t.incognito&&"normal"===n.type&&(!u||"minimized"!==n.state)});if(o.length>0){if(e=o.map(function(n){return n.id}),i=e.indexOf(i),e.length>=2||i<0)return r=(i+zn)%e.length,i<0&&zn<0&&r++,r<0&&(r+=e.length),void Zn.query({windowId:e[r],active:true},function(n){var e=n[0],r=Fn().end?3e4:e.index+(Fn().right?1:0),i=function(){Zn.move(t.id,{index:r,windowId:e.windowId},function(){pn(),ot(t.id,true)})};r>=0||f>=52?i():(function(n,t,e){var r="number"==typeof n,i={type:"normal",focused:false,incognito:t,state:"minimized",tabId:r?n:void 0,url:r?void 0:n};f<44&&(i.state=void 0,i.left=i.top=0,i.width=i.height=50),Jn.create(i,e)})(t.id,t.incognito,i)})}else o=n.filter(function(n){return n.id===i});st({tabId:t.id,incognito:t.incognito},1===o.length&&"normal"===o[0].type?o[0].state:"",pn)})},O,hn,function(n){if(n){var t=ut(n).index,e=mn(t,n.length,0,1),r=e[0],i=e[1];Zn.remove(n[t+1===i||zn>0&&r!==t?r:i-1].id)}},yn,function(n){var t,e,i,u,o,l=ut(n),a=Fn().other?0:zn,f=l.index,c=false,s=Fn().filter;a>0?(++f,n=n.slice(f,f+a)):(c=f>0&&n[0].pinned&&!n[f-1].pinned,a<0?n=n.slice(Math.max(f+a,0),f):n.splice(f,1)),c&&(n=n.filter(function(n){return!n.pinned})),s&&(t=s.includes("title")?l.title:"",e=s.includes("hash"),i=nt(l),u=s.includes("host")?r.re(i):null,o=e?i:u?u.host:i.split("#",1)[0],n=n.filter(function(n){var l=nt(n),a=u?r.re(i):null;return(a?a.host:e?l:l.split("#",1)[0])===o&&(!t||n.title===t)})),n.length>0&&Zn.remove(n.map(function(n){return n.id}),Xn)},function(n){if(!(n.length<=0)){var t=n[0];++t.index,f>=52||0===m.ft||Nn.E.qn||!r.P(nt(t))?a.Ht(t):Jn.get(t.windowId,function(n){n.incognito&&!t.incognito&&(t.openerTabId=t.windowId=void 0),a.Ht(t)})}},function(){var t=Gn(),e=function(e){if(zn>e.length)return Vt(n("indexOOR"));var r=e[zn-1],i=r.tab||r.window;i&&t.restore(i.sessionId)};if(zn>t.MAX_SESSION_RESULTS)return e([]);zn<=1?t.restore(null,Xn):t.getRecentlyClosed(e)},function(){var t,e=Gn(),r=zn;if(Tn(r)<2&&(jn?jn.s.a:2===m.ft))return Vt(n("notRestoreIfIncog"));r>(t=e.MAX_SESSION_RESULTS)&&(r=t);do{e.restore(null,Xn)}while(0<--r)},function(){var n,t,e,i,u,o,l=Fn().keys,a=Tn(zn);"string"==typeof l&&l.trim()&&l.includes(" ")&&(l=l.split(" ")),l instanceof Array?a>l.length&&1!==l.length?Vt('"runKey" has no such a key'):"string"!=typeof(n=l[1===l.length?0:a-1])?Vt('in "runKey", the key is invalid'):jn&&(jn.s.f|=2,t=1,null!=(e=/^\d+|^-\d*/.exec(n))&&(n=n.slice((i=e[0]).length),t="-"!==i?parseInt(i,10)||1:-1),(u=c.Ft.get(n))?36===u.St&&u.Vt?Vt('"runKey" can not be nested'):(r.y(),t=1===l.length?t*zn:a!==zn?-t:t,Object.keys(Fn()).length>1&&(u=r.r(r.L(),u),o=r.L(),r.r(o,Fn()),delete o.keys,u.Nt&&r.r(o,u.Nt),u.Nt=o),_(u,t,$n,jn,0)):Vt('in "runKey", the key is invalid')):Vt("Require keys: space-seperated-string | string[]")},function(t){var e,i,u=(Fn().keyword||"")+"",o=a.ge({u:nt(t[0])});o&&u?(e=r.ee(o.u.split(" "),u,2),i=Fn().reuse,En=r.T({reuse:null!=i?i:0,opener:true,url_f:e}),O(t)):Vt(n(u?"noQueryFound":"noKw"))},function(){var t=Fn().text;Vt(t?t+"":n("needText"))},function(){var n,t=Fn().id,e=Fn().data;t&&"string"==typeof t&&void 0!==e?(n=Date.now(),chrome.runtime.sendMessage(t,Fn().raw?e:{handler:"message",from:"Vimium C",count:zn,keyCode:$n,data:e},function(e){if(Xn()){var r=Xn();console.log("Can not send message to the extension %o:",t,r),Vt("Error: "+(r.message||r))}else"string"==typeof e&&Math.abs(Date.now()-n)<1e3&&Vt(e)})):Vt('Require a string "id" and message "data"')},function(n){e.Ot(zn,Fn(),n)},function(){if(f<45)return Vt(n("noMute",[45]));Fn().all||Fn().other?Zn.query({audible:true},function(t){var e,r,i,u=Fn().other?jn?jn.s.t:m.vt:-1,o=-1===u?"All":"Other",l=false,a={muted:true};for(e=t.length;0<=--e;)(r=t[e]).id===u||(f<46?r.muted:r.mutedInfo.muted)||(l=true,Zn.update(r.id,a));if(l)return Vt(n("mute",[o]));for(a.muted=false,e=t.length;0<=--e;)(i=t[e].id)!==u&&Zn.update(i,a);Vt(n("unmute",[o]))}):tt(function(t){var e=t[0],r=f<46?!e.muted:!e.mutedInfo.muted;Zn.update(e.id,{muted:r}),Vt(n(r?"muted":"unmuted"))})},function(n){var t,e,r,i,u=ut(n),o=!u.pinned,l={pinned:o},a=o?0:1,f=0;if(gn(zn)>1&&o)for(;n[f].pinned;)f++;for(e=f+(t=mn(n.length<2?0:u.index,n.length-f,n.length))[a]-a,r=f+t[1-a]-a,i=[];e!==r;e+=o?1:-1)(o||n[e].pinned)&&i.push(n[e].id);if((r=i.length)>30){if(!(r=cn("togglePinTab",r)))return;1===r&&(i=[u.id])}for(e=0;e<r;e++)Zn.update(i[e],l)},kn,function(t){var e,r,i,u=t[0].id,o=((Fn().style||"")+"").trim(),l=!!Fn().current;if(o){for(e=0,r=_t;e<r.length;e++)if((i=r[e]).s.t===u)return void i.postMessage({N:46,t:o,c:l});l||on({t:o,o:1})}else Vt(n("noStyleName"))},function(){Zn.getZoom(function(n){var t,e,r,i,u,o,l;if(!n)return Xn();if(zn<-4&&(zn=-zn),e=Math,zn>4)t=e.max(.25,e.min(t=zn/(zn>1e3?zn:zn>49?100:10),5));else{for(r=0,i=9,u=[.25,1/3,.5,2/3,.75,.8,.9,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],o=0,l=0;o<u.length&&(l=Math.abs(u[o]-n))<i;o++)r=o,i=l;t=u[r+zn<0?0:e.min(r+zn,u.length-1)]}Math.abs(t-n)>.005&&Zn.setZoom(t)})},function(n){if(!(n.length<2)){n.splice(ut(n).index,1);var t=(n=n.filter(function(n){return m.Pt.has(n.id)}).sort(m.$t))[zn>0?Math.min(zn,n.length)-1:Math.max(0,n.length+zn)];t&&ot(t.id)}}],xn=function(n){var t=an;return an=null,t&&t(n),n?void 0:Xn()},Mn=function(n,t){r.Fe(),KeyMappings?KeyMappings.Lt(n,t,_):r.me("KeyMappings").then(function(){return Mn(n,t)})},_=function(n,t,e,i){var u,o,l,a,f,c;if(an)an=null;else{if(o=n.At,(u=n.Nt)&&(l=u.count)&&(t=t*l||1),1===(t=t>=1e4?9999:t<=-1e4?-9999:0|t||1));else if(1===o)t=1;else if(o>0&&(t>o||t<-o)){if(!(t=cn(n.Mt,Tn(t))*(t<0?-1:1)))return}else t=t||1;if(!n.Vt)return jn=i,void St(i,a=n.St,9224>>a&1||5===a&&!!u&&false===u.keepHover,u,t);c=Rn[f=n.St],$n=e,En=u||r.L(),jn=i,zn=t,(t=In[f])<1?c():(an=c,(t<2||2===t&&Tn(zn)<2?tt:et)(xn))}},Sn=-1,s=[function(t,e){var r,i,u=t.k,o=Nn.Sn;if(!(u>=0&&u<o.length))return jn=e,Dt(n("notModify",[u]));r=o[u],i=Nn.Rn&&Nn.Rn(),Nn.on(r)!==t.v&&(i?i.then(function(){Nn.in(r,t.v)}):Nn.in(r,t.v))},function(n,t){return h.kt(t.s.a,n.q,n.i)},function(n,t){var e=a.ge(n);if(!("i"in n))return e;t.postMessage({N:44,i:n.i,s:e})},function(n,t){var e,i,u,o,l,a,f,c,d,_,g,m,p,b,B,U,h,y,w,k,T;if(n.e)return n.e=false,void(null==(e=s[3](n)).p?(jn=t,Vt(e.u)):t?Mt(0,false,{r:1,url:e.u}):Zn.update({url:e.u}));if(u=(i=n.u).toLowerCase(),!r.D.test(r.te(u)))return r.y(),{u:"This url has no upper paths",p:null};if(o=encodeURIComponent,l="",d=false,g=null,p=0,b=0,B=false,(m=i.lastIndexOf("#")+1)&&(l=i.slice(m+ +("!"===i.substr(m,1))),((m=(a=r.K(l)).lastIndexOf("/"))>0||0===m&&a.length>1)&&(B=a!==l,"/"===(g=(f=(h=/([^&=]+=)([^&\/=]*\/[^&]*)/).exec(a)||/(^|&)([^&\/=]*\/[^&=]*)(?:&|$)/.exec(a))?f[2]:a)||g.includes("://")?g=null:f?B?(a="https://example.com/",a=encodeURI(a+g).slice(a.length),(m=l.indexOf(a))<0&&(m=l.indexOf(a=o(g))),m<0&&(B=false,m=l.indexOf(a=g)),b=m+a.length,m<0&&"&"!==f[1]&&((m=l.indexOf(a=f[1]))<0&&(B=true,a=o((a=f[1]).slice(0,-1)),m=l.indexOf(a)),m>=0&&(b=l.indexOf("&",m+=a.length)+1)),m>=0?p=m:(U=h.exec(l))?(g=r.K(U[2]),b=(p=U.index+U[1].length)+U[2].length):"&"!==(a=f[1])&&(m=i.length-l.length,l=a+o(g),i=i.slice(0,m)+l,p=a.length,b=0)):p=f.index+f[1].length:p=0,g&&(p+=m=i.length-l.length,b>0&&(b+=m)))),!g){if(u.startsWith(v)&&!n.f)return r.y(),{u:"An extension has no upper-level pages",p:null};l="",p=i.indexOf("/",i.indexOf("://")+3),u.startsWith("filesystem:")&&(p=i.indexOf("/",p+1)),m=i.indexOf("?",p=p<0?0:p),b=i.indexOf("#",p),g=i.slice(p,m=(m=b<0?m:m<0?b:m<b?m:b)>0?m:i.length),b=0,B=false}if(m=n.p,c=g.startsWith("/"),!l&&u.startsWith("file:")){if(g.length<=1||11===i.length&&i.endsWith(":/")){if(!n.f)return r.y(),{u:"This has been the root path",p:null};m=0}d=true,n.f||1===m&&(m=-1)}else d=!(l||!u.startsWith("ftp:"))||(null!=n.t?!!n.t:null!=n.r?!!n.r:g.length>1&&g.endsWith("/")||/\.([a-z]{2,3}|apng|jpeg|tiff)$/i.test(g));return w=(y=g.slice(+c,g.length-+g.endsWith("/")).split("/")).length,k=m<0?m+w:m,_=w<=1&&m<=-2&&i.lastIndexOf("#",p)>0,y.length=m=k>w?w:m>0?k-1:k>0?k:0,g=y.join("/"),(a=n.a||"")&&(g+="/"===a[0]?a:"/"+a),g=g?("/"===g[0]?"":"/")+g+(!d||g.endsWith("/")?"":"/"):"/",!b&&i.lastIndexOf("git",p-3)>0&&(g=Vn(i,g)||g),!_||g&&"/"!==g?(a=B?o(g):g,i=i.slice(0,p)+(b?a+i.slice(b):a)):i=i.split("#",1)[0],(T=C(i,64,n.s)||i)!==i&&(r.V(T,null,-2),i=0===r.B?T:i),r.y(),{u:i,p:g}},function(t,e){var i,u,o=a.ge(t);if(!o||!o.k)return jn=e,Vt(n("noEngineFound"));u=function(t){var i=null===t?"It's not allowed to read clipboard":(t=t.trim())?"":n("noSelOrCopied");if(i)return jn=e,void Vt(i);t=r.ee(t.split(r.O),o.k),P(t,0,{})||ft(t)},(i=t.t.trim()||(t.c?x(t.s):""))instanceof Promise?i.then(u):u(i)},function(t,e){var r,i=t.s,u=false!==t.a;jn=wt(e),"number"!=typeof i?(Gn().restore(i,function(){var t=Xn();return t&&Vt(n("noSessionItem")),t}),u||((r=e.s.t)>=0||(r=m.vt),r>=0&&ot(r))):Zn.update(i,{active:true},function(t){return Xn()?Vt(n("noTabItem")):lt(t),Xn()})},L,function(n,t){var e,r=t.s.t,i=dt[r];if(i){if(t!==i[0])return Pn&&(e=t.s.s)!==i[0].s.s?(i[0]=t,void a.ct(r,e)):void(i[0]=t)}else Pn&&a.ct(r,t.s.s)},function(n,t){var e,r,i,u,o=t;if(o||(o=kt(n.tabId,n.frameId))){if(r=(e=o.s).u,i=a.Zn(e.u=t?n.u:n.url,e),e.s!==(u=null===i?0:i?1:2)){if(1&e.f)return;e.s=u,Pn&&dt[e.t][0]===o&&a.ct(e.t,u)}else if(!i||i===a.Zn(r,e))return;o.postMessage({N:1,p:i,f:0})}},function(n,t){var e,r;jn=t,zn=1,$n=n.k,2!==(e=n.t||0)?1===e?J():Z():(r=dt[t.s.t])?xt(r[0],r.length<=3,1):Rt(t,{N:45,l:$n})},function(n,t){var e,r,i,u=dt[t.s.t];if(u&&(u[0].s.f|=2,!(u.length<3)))for(e={N:8},r=u.length;0<--r;)(i=u[r])!==t&&(i.postMessage(e),i.s.f|=2)},function(n,t){var e,r,i=t.s.t,u=dt[i],o=n.u;if(!u||u.length<3)return false;for(e=null,r=u.length;1<=--r;)if(u[r].s.u===o){if(e){e=null;break}e=u[r]}return e?($n=n.k,K(n,t,e,1)):Qn()&&Qn().getAllFrames({tabId:t.s.t},function(e){var r,u,o,l,a=0,f=t.s.i;for(r=0,u=e;r<u.length;r++)if((o=u[r]).parentFrameId===f){if(a){a=0;break}a=o.frameId}(l=a&&kt(i,a))&&($n=n.k,K(n,t,l,1))}),!!e},Q,function(n,t){t.s.f|=6,t.postMessage({N:12,H:i})},function(n,t){var e=n.c,i=n.i;if($n=0,null!=e)delete n.c,delete n.H,delete n.i,zn=+e||1,En=r.T(n);else{if(true!==n.r)return;if(null==Fn()||-1!==Fn().secret){if(i)return;En=r.L(),zn=1}else if(i&&Fn().v===Nn.E._n)return}jn=t,X(i)},function(n,t){It(t,false)||d.qt(n.q,n,Dn.bind(t,0|n.i))},bn,function(n,t){var e,i,u,o,l,a;t.s.f|=2,i=1,null!=(u=/^\d+|^-\d*/.exec(e=n.k))&&(e=e.slice((o=u[0]).length),i="-"!==o?parseInt(o,10)||1:-1),(l=c.Ft).has(e)||(u=e.match(r.Me),e=u[u.length-1],i=1),a=l.get(e),r.y(),_(a,i,n.l,t,0)},function(n,t){switch(jn=t,n.a){case 1:return j.Kt(n,t);case 0:return j.Wt(n,t);case 2:return j.zt(n.u);default:return}},W,_n,function(n,t){a.Zt(n,t)},en,function(t,e){jn=null,H(t.u,function(){jn=e,Vt(n("jsFail"))})},function(n,t){K(n,t,kt(t.s.t,0),n.f)},on,function(n,t){En=r.T({active:true,returnToViewport:true}),jn=t,On(1),G()},rn,function(){return Nn.He.We&&Nn.He.We(),{m:Nn.nn}},function(n,t){t.s.f|=4},function(n,t){En=r.T({mode:n.c?"caret":"",start:true}),jn=t,On(1),Y()}],Vn=function(n,t){var e,i,u,o=r.re(n),l=o?o.host:"";if(l&&/git\b|\bgit/i.test(l)&&/^[\w\-]+(\.\w+)?(:\d{2,5})?$/.test(l)&&((e=t.split("/"))[i=e.length-1]||(i--,e.pop()),u=e[i],"github.com"===l)){if(3===i)return"pull"===u||"milestone"===u||"commit"===u?t+"s":"tree"===u||"blob"===u?e.slice(0,3).join("/"):null;if(4===i&&"releases"===e[3]&&("tag"===e[4]||"edit"===e[4]))return e.slice(0,4).join("/");if(i>3)return"blob"===e[3]?(e[3]="tree",e.join("/")):null}},Dn=function(n,t,e,i,u,o,l,a){var c,s,d,_,v,g,m,p=this.s.u,b=2===n?2:0;if(1===n&&f>=58&&(p=p.slice(0,p.indexOf("/",p.indexOf("://")+3)+1),c=dt,null!=(s=Sn>=0?kt(Sn,0):null)&&(s.s.u.startsWith(p)?b=1:Sn=-1),!b))for(d in c){for(v=1,g=(_=c[+d]).length;v<g;v++)if(0===(m=_[v].s).i){m.u.startsWith(p)&&(b=1,Sn=+d);break}if(b)break}Rt(this,{N:43,a:e,c:a,i:b,l:t,m:i,r:l,s:u,t:o}),r.y()},a={ot:s,Zn:r.Ne,fe:ht,Zt:function(t,e){var r=t.t,i=t.u,u="tab"===r?r:r+" item";jn=wt(e),"tab"===r&&m.vt===+i?Vt(n("notRemoveCur")):d.Zt(i,r,function(t){Vt(n(t?"delSug":"notDelSug",[n("sug_"+r)||u]))})},ct:function(){},Jt:Dt,ge:function(n){var t,e,i,u,o,l,a=n.u,f=a.toLowerCase(),c=null,d=false;if(!r.D.test(r.te(f)))return r.y(),null;if(n.p)return{k:"",s:0,u:(u=null!=(i=s[3](n)).p)?i.u:a,e:u?i.p:i.u};for(o=Nn.ce.searchEngineRules,(e=r.Te(f))&&(f=f.slice(e),a=a.slice(e)),e=o.length;0<=--e&&(!f.startsWith((t=o[e]).Ce)||!(c=a.slice(t.Ce.length).match(t.Ee))););if(!c||!t)return r.y(),null;for(c.length>1&&!t.Ee.global&&c.shift(),l=t.Ie,c.length>1?d=true:l instanceof RegExp?(c=(f=c[0]).match(l))?(c.shift(),d=true):c=[f]:c=c[0].split(l),f="",e=0;e<c.length;e++)f+=" "+r.K(c[e]);return f=f.trim().replace(r.O," "),r.y(),{k:t.Pe,u:f,s:d?f.lastIndexOf(" ")+1:0}},Ht:function(n,t){var e,r,i,u,o,l,a=n.id;if(t)return e=0,r=-1,i=function(){var n=Xn();if(n)return Gn().restore(),r>=0&&Zn.remove(r),r=0,n;(e+=1)>=5||setTimeout(function(){Yn(a,i)},50*e*e)},1===t&&Zn.create({url:"about:blank",active:false,windowId:n.windowId},function(n){r?r=n.id:Zn.remove(n.id)}),Zn.remove(a,Xn),void Yn(a,i);f<45||(o=f<46?!n.muted:!n.mutedInfo.muted,u=function(n){Zn.update(n.id,{muted:o})}),l={windowId:n.windowId,index:n.index,url:nt(n),active:n.active,pinned:n.pinned,openerTabId:n.openerTabId},at(l,u),Zn.remove(a)},Gt:Vt,ht:function(t,e){var i,u,o,l,f,c,s,d,_,v,g,p,b,B,U,h,y,w,C,k,T=dt[e||(e=m.vt)];if(T){for(jn=kt(e,0)||T[0],u=(i=t.search(/\/| /))>0?t.slice(i+1):"",t=t.toLowerCase(),i>0&&(t=t.slice(0,i)),t.includes("-")&&t.endsWith("able")&&(t+="d"),u=((o=!!u&&/^silent/i.test(u))?u.slice(7):u).trim(),l=0,f=function(n){console.log(n),l||Vt(n),l=1},u&&!u.startsWith("^ ")?(f('"vimium://status" only accepts a list of hooked keys'),u=""):u&&(u=u.replace(/<(\S+)>/g,"$1").replace(r.O," ")),s=jn.s,d=!Exclusions.Qn.length,_=s.s,v=d?0:1===_?_:(c=a.Zn(s.u,s))?1:null===c?0:2,p=!!u&&"enable"===t,B=!((b=null!==(g="enable"===t?0:"disable"===t?2:"toggle-disabled"===t?2!==_?2===v?null:2:2===v?0:null:"toggle-enabled"===t?0!==_?0===v?null:0:0===v?2:null:"toggle-next"===t?1===_?0:0===_?2===v?null:2:2===v?0:null:"toggle"===t||"next"===t?0!==_?0:2:("reset"!==t&&f('Unknown status action: "'+t+'", so reset'),null))?2===g?3:1:0)||d),U={N:1,p:2===g||p?u:null,f:b},h=b?g:0,y=T.length;1<=--y;)(C=(w=T[y]).s).f=b?1|C.f:-2&C.f,B&&1!=(h=null===(k=U.p=a.Zn(C.u,C))?0:k?1:2)&&C.s===h||(C.s=h,w.postMessage(U));h=T[0].s.s,o||l||Vt(n("newStat",n(0!==h||p?2===h?"fullDisabled":"halfDisabled":"fullEnabled"))),Pn&&h!==_&&a.ct(e,h)}},Qt:function(n){var t,e=m.vt,r=dt[e];if("quickNext"===n&&(n="nextTab"),(t=c.xt)&&t.get(n))return null==r||2&r[0].s.f||e<0?vn(n,r):void Yn(e,function(t){return vn(n,t&&"complete"===t.status?dt[t.id]:null),Xn()});t&&null!==t.get(n)&&(t.set(n,null),console.log("Shortcut %o has not been configured.",n))},gn:function(n,t){return null==n?dt:null==t?-3===n?_t:dt[n]||null:kt(n,t)},Bn:function(){3===Nn.He.Ve&&(c.ut||(Nn.hn("keyMappings"),Nn.on("vimSync")||Nn.He.De||(KeyMappings=null)),0===An.o&&(c.It["m-s-c"]=36),a.Bn=null,Nn.on("hideHud",true),Nn.on("nextPatterns",true),Nn.on("previousPatterns",true),Wn.runtime.onConnect.addListener(function(n){return mt(n,0|n.name)}),Wn.runtime.onConnectExternal.addListener(function(n){var t,e=n.sender,r=n.name;if(e&&Ct(e.id,e.url)&&r.startsWith("vimium-c.")&&(t=r.split("@")).length>1){if(t[1]!==Nn.E.GitVer)return n.postMessage({N:2,t:1}),void n.disconnect();mt(n,0|t[0].slice(9)),n.s.f|=64}else n.disconnect()}))}},Wn.runtime.onMessageExternal.addListener(function(n,t,e){if(Ct(t.id,t.url))if("string"!=typeof n){if("object"==typeof n&&n)switch(n.handler){case"shortcut":var r=n.shortcut;r&&a.Qt(r+"");break;case"id":e({name:"Vimium C",host:location.host,shortcuts:true,injector:Nn.E.In,version:Nn.E.vn});break;case 99:e({s:n.scripts?Nn.E.Cn:null,version:Nn.E.vn,host:"",h:"@"+Nn.E.GitVer});break;case"command":Mn(n,t)}}else Mn({command:n},t);else e(false)}),Nn.hn("extAllowList"),Zn.onReplaced.addListener(function(n,t){var e,r=dt,i=r[t];if(i)for(delete r[t],r[n]=i,e=i.length;0<--e;)i[e].s.t=n}),"[]"!==Nn.an.getItem("exclusionRules")&&Exclusions.Xn(Nn.on("exclusionRules")),Nn.mn.showActionIcon=function(n){Pn=n&&!!Wn.browserAction},Nn.hn("vomnibarPage",null),Nn.hn("searchUrl",null),Nn.hn("vomnibarOptions"),window.onunload=function(n){var t,e,r,i;if(!n||false!==n.isTrusted){for(e in(t=dt).o=_t,t)for(i=(r=t[e]).length;0<--i;)r[i].disconnect();_t.length>0&&_t[0].disconnect()}},f<59||!r.Ue("\\p{L}","u",0)?Nn.yn("words",function(n){u=n.replace(/[\n\r]/g,"").replace(/\\u(\w{4})/g,function(n,t){return String.fromCharCode(+("0x"+t))})}):u=""})();