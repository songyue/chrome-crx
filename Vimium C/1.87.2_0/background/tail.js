"use strict";r.Ae(200,function(){function t(t){if(p||t.v||(t.v=K.a(t.u)),null==t.textSplit){t.title=n(t.title);var e=t.t,r=i(e);t.t=e.length!==t.u.length?r:"",t.textSplit=s(r,u(r),e.length-r.length,p?U-13-Math.min(t.title.length,40):U)}else t.t===t.u&&(t.t="")}function n(t){var n=t.length>U+40;return n&&(t=r.j(t,0,U+39)),e(n?t+"\u2026":t,u(t))}function e(t,n){var e,i,u,o,l;if(0===n.length)return r.z(t);for(e="",i=0,u=0;u<n.length;u+=2)o=n[u],l=n[u+1],e+=r.z(t.slice(i,o)),e+="<match>",e+=r.z(t.slice(o,l)),e+="</match>",i=l;return e+r.z(t.slice(i))}function i(t){var n=r.Te(t);return!n||n>=t.length?t:t.slice(n,t.length-+(t.endsWith("/")&&!t.endsWith("://")))}function u(t){var n,e,i,r,u,l,s,f,a,c,_,g=[];for(n=0,e=k.length;n<e;n++)for(i=0,r=0,u=void 0,s=(l=t.split(G.ti[n])).length-1,f=k[n].length;i<s;i++,r=u)u=(r+=l[i].length)+f,g.push([r,u]);if(0===g.length)return g;if(1===g.length)return g[0];for(g.sort(o),a=g[0],n=1,c=1,e=g.length;c<e;c++)a[n]>=(_=g[c])[0]?a[n]<_[1]&&(a[n]=_[1]):(a.push(_[0],_[1]),n+=2);return a}function o(t,n){return t[0]-n[0]}function s(t,n,e,i){var u,o,l,s,f,a="",c=t.length,_=c,g="";if(c<=i||(e>1?_=t.indexOf("/")+1||c:(_=t.indexOf(":"))<0?_=c:r.D.test(t.slice(0,_+3).toLowerCase())?_=t.indexOf("/",_+4)+1||c:_+=22),_<c&&n.length)for(u=n.length,o=c+8;(u-=2)>-4&&o>=_;o=u<0?0:n[u])if(l=u<0?_:n[u+1],(s=o-20-Math.max(l,_))>0&&(c-=s)<=i){_=l+(i-c);break}for(c=0,u=0;c<i&&u<n.length;u+=2)(s=(o=n[u])-20-(f=Math.max(c,_)))>0?(i+=s,g=r.j(t,c,f+11),a+=r.z(g),a+="\u2026",g=r.R(t,o-8,o),a+=r.z(g)):c<o&&(g=t.slice(c,o),a+=r.z(g)),g=t.slice(o,c=n[u+1]),a+="<match>",a+=r.z(g),a+="</match>";return t.length<=i?(g=t.slice(c),a+r.z(g)):(g=r.j(t,c,i-1>c?i-1:c+10),a+r.z(g)+"\u2026")}function a(t){return Q.ni(t.t,t.title)}function c(t){var n=(t-Q.ei)/18144e5;return n<0?0:n<1?n*n*.666667:n<1.000165?.666446:0}function _(t,n,e){var i=c(e),r=Q.ni(t,n);return i<=r?r:(r+i)/2}function g(t,n){return n}var v=0,S=null,h=false,p=false,B=0,U=0,y=0,b=0,T=0,w=0,k=[""],M="",R="",x="",C="",O=0,D=false,E=false,I="",N="",j=0,J=null,L=true,P=function(t,n,e,i,r,u){this.e=t,this.u=n,this.t=e,this.title=i,this.r=r(this,u),this.visit=0},V=performance,F={ii:[],ri:[],ui:null,oi:"",li:0,si:0,qt:function(t,n){if(0!==k.length&&1&j)2===F.si?F.fi():F.ui=t;else if(W.ai([],1),n)return;0===F.si&&F.ci()},_i:function(t){return 47===t.charCodeAt(0)},fi:function(){var t,e,i,r,u,l,s,f,a,c,_,m=k.some(F._i),v=!!Y.gi,d=[],S=Y.mi&&Y.mi.ii||F.ii,h=S.length,p=[];for(e=0;e<h;e++)if(Q.vi((i=S[e]).t,m?i.oi:i.di)&&(L||i.Si)){if(v&&d.push(i),N&&i.u.length<N.length+2&&N===(i.u.endsWith("/")?i.u.slice(0,-1):i.u))continue;p.push([-Q.ni(i.t,i.di),e])}for(v&&(Y.gi.ii=d),T+=t=p.length,t?(p.sort(o),w>0&&!(6&j)?(p=p.slice(w,w+y),w=0):t>w+y&&(p.length=w+y)):j^=1,r=[],u=64&B?-.666446:0,l=0,s=p;l<s.length;l++)a=(f=s[l])[0],u&&(a=a<u?a:(a+u)/2),c=new P("bookm",(i=S[e=f[1]]).u,i.t,m?i.oi:i.di,g,-a),_=32&B&&X.hi?X.pi(i.u):-1,c.visit=_<0?0:X.Ui[_].Bi,r.push(c),null!==i.yi&&(c.u=i.yi,c.title=n(c.title),c.textSplit="javascript: \u2026",c.t=i.bi);W.ai(r,1)},Ti:function(){var t=chrome.bookmarks;t.onCreated.addListener(F.wi),t.onRemoved.addListener(F.ki),t.onChanged.addListener(F.ki),t.onMoved.addListener(F.wi),t.onImportBegan.addListener(function(){chrome.bookmarks.onCreated.removeListener(F.wi)}),t.onImportEnded.addListener(function(){var t=F.wi;chrome.bookmarks.onCreated.addListener(t),t()})},ci:function(){F.si=1,F.Cr&&(clearTimeout(F.Cr),F.Cr=0),chrome.bookmarks.getTree(F.Mi)},Mi:function(t){F.si=2,F.ii=[],F.ri=[],Y.zt(2),t.forEach(F.Ri,F);var n=F.ui;if(F.ui=null,setTimeout(function(){return nt.xi(F.ii)},50),F.Ti&&(setTimeout(F.Ti,0),F.Ti=null),n&&!n.o)return F.fi()},Ri:function(t){var n,e,i,u=t.title,o=t.id,l=F.oi+"/"+(u||o);if(t.children)return F.ri.push(o),n=F.oi,2<++F.li&&(F.oi=l),t.children.forEach(F.Ri,F),--F.li,void(F.oi=n);i=(e=t.url).startsWith("javascript:"),F.ii.push({Ci:o,oi:l,di:u||o,t:i?"javascript:":e,Si:J?Z.Oi(e,u):1,u:i?"javascript:":e,yi:i?e:null,bi:i?r.K(e):null})},Cr:0,Di:0,Ei:false,Ii:function(){var t=V.now()-F.Di;0===F.si&&(t>=6e4||t<-5e3?(F.Cr=F.Di=0,F.Ei=false,F.ci()):(F.ii=[],F.ri=[],F.Cr=setTimeout(F.Ii,3e4),Y.zt(2)))},wi:function(){F.Di=V.now(),F.si<2||(F.Cr=setTimeout(F.Ii,6e4),F.si=0)},ki:function(t,n){for(var e,i,r,u,o,l,s,f=F.ii,a=f.length,c=n&&n.title,_=0;_<a&&f[_].Ci!==t;_++);if(_<a)return i=(e=f[_]).u,r=n&&n.url,nt.Ni&&(null==c?i!==e.t||!n:null!=r&&i!==r)&&nt.ji.has(i)&&X.hi&&X.pi(i)<0&&nt.ji.delete(i),void(null!=c?(e.oi=e.oi.slice(0,-e.di.length)+(c||e.Ci),e.di=c||e.Ci,r&&(e.u=r,e.t=nt.Ji(r,e),nt.Li()),J&&(e.Si=Z.Oi(e.u,e.di))):(f.splice(_,1),n||F.wi()));if(!(F.ri.indexOf(t)<0)){if(null!=c)return F.wi();if(!F.Ei&&nt.Ni){for(u=nt.ji,o=X.pi,l=0,s=X.hi?f:[];l<s.length;l++)u.has(i=s[l].u)&&o(i)<0&&u.delete(i);F.Ei=true}return F.wi()}}},A={qt:function(t,n){var e,i,r,u,o,l;if(!(2&j))return W.ai([],2);if(i=k.length>0,e=X.Ui){if(i)return W.ai(A.Pi(e),2);(X.Vi>10||X.Fi>0)&&X.Ai()}else if(r=i?function(n){if(!t.o)return W.ai(A.Pi(n),2)}:null,i&&(p||X.$i)?(X.$i>0&&clearTimeout(X.$i),X.$i=0,X.qi(r)):(X.$i||(X.$i=setTimeout(function(){X.$i=0,X.qi(r)},i?200:150)),i&&W.Ki((l=(o=(u=W.Wi).length)>0)&&"search"===u[0].t?[u[0]]:[],h&&l,0,0,o,R,O)),i)return;h=false,0===n?W.Hi(A.Qi,t):chrome.sessions?chrome.sessions.getRecentlyClosed(A.zi.bind(A,t)):A.Gi([],t,new Set,0,0)},Pi:function(t){var n,e,i,u,o=1===k.length&&("."===k[0][0]?/^\.[\da-zA-Z]+$/.test(k[0]):(r.V(k[0],null,-2),r.B<=2)),l=!(Y.mi&&Y.mi.Ui),s=Y.gi?[]:null,f=[-1.1,-1.1],a=[],m=Q.vi,v=G.ti[0],d=y+w,S=-1.1,h=0,p=0,B=0;for(I&&d++,p=d;--p;)f.push(-1.1,-1.1);for(d=2*d-2,l||(t=Y.mi.Ui),n=t.length;h<n;h++)if(e=t[h],(o?v.test(e.t):m(e.t,e.di))&&(L||e.Si)&&(s&&s.push(e),B++,!(S>=(i=o?c(e.Bi)||1e-16*e.Bi:_(e.t,e.di,e.Bi))))){for(p=d-2;0<=p&&f[p]<i;p-=2)f[p+2]=f[p],f[p+3]=f[p+1];f[p+2]=i,f[p+3]=h,S=f[d]}for(s&&(Y.gi.Ui=s),T+=B,B||(j^=2),5&j?h=0:(h=2*w,w=0);h<=d&&!((i=f[h])<=0);h+=2)(e=t[f[h+1]]).u!==I?((u=new P("history",e.u,e.t,e.di,g,i)).visit=e.Bi,a.push(u)):d--;return nt.Li(),a},Qi:function(t,n){var e,i,r,u,o,l;if(Y.Xi(n),!t.o){for(e=new Set,i=0,r=0,u=n;r<u.length;r++)(o=u[r]).incognito&&S||e.has(l=o.url||o.pendingUrl)||(e.add(l),i++);return A.Gi([],t,e,w,i)}},zi:function(t,n){var e,i,r;if(!t.o)return e=[],i=new Set,r=-w,n.some(function(t){var n,u,o,l=t.tab;return!!l&&((n=l.url).length>2e3&&(l.url=n=X.Zi(n,l)),!(!L&&!Z.Oi(n,l.title))&&!i.has(u=n+"\n"+l.title)&&(i.add(u),i.add(n),++r>0&&e.push({u:l.url,di:l.title,Yi:(o=t.lastModified,o<3e11&&o>-4e10?1e3*o:o),Tr:l.sessionId}),e.length>=y))})?A.Mr(e):A.Gi(e,t,i,-r,0)},Gi:function(t,n,e,i,r){chrome.history.search({text:"",maxResults:w+y*(L?1:2)+r},function(r){if(!n.o){r=r.filter(function(t){var n=t.url;return n.length>2e3&&(t.url=n=X.Zi(n,t)),!e.has(n)&&(L||0!==Z.Oi(t.url,t.title||""))}),i<0?r.length=Math.min(r.length,y-t.length):i>0&&(r=r.slice(i,i+y));var u=r.map(function(t){return{u:t.url,di:t.title,Yi:t.lastVisitTime,Tr:null}});i<0&&(u=t.concat(u)),A.Mr(u)}})},Mr:function(t){t.forEach(A.Rr),w=0,nt.Li(),W.ai(t,2)},Rr:function(t,n,e){var i=t.u,r=new P("history",i,nt.Ji(i,i),t.di||"",g,(99-n)/100),u=t.Tr;r.visit=t.Yi,u&&(r.s=u,r.label='<span class="undo">&#8630;</span>'),e[n]=r}},$={qt:function(t,n){if(1!==k.length||!(16&j)||k[0].lastIndexOf("/",k[0].length-2)>=0)return W.ai([],16);if(X.M);else{if(!X.Ui)return n>0?W.ai([],16):X.qi(function(){if(!t.o)return $.qt(t,0)});$.ci(X.Ui)}return $.fi()},fi:function(){var n,e,i,u,o,l,s,f,a,c,m,v,d,S,p,B,U,b,M,R,x,C,O,D=r.M,E=Q.xr,j=k[0].replace("/","").toLowerCase(),J="",V=-1.1;for(Q.xr=3,o=D.keys(),l=void 0;!(l=o.next()).done;)(i=l.value).includes(j)&&(e=D.get(i),(L||e.Or>0)&&(u=_(i,"",e.Bi))>V&&(V=u,J=i));s=J.length===j.length,J&&!s&&(J.startsWith("www.")||J.startsWith(j)||(f=J.slice(J.indexOf(".")+1)).includes(j)&&(a=void 0,(a=D.get(f="www."+f))?(L||a.Or>0)&&(J=f,e=a):(a=D.get(f="m."+f))&&(L||a.Or>0)&&(L||a.Or>0)&&(J=f,e=a)),(c=J.startsWith(j)?0:J.startsWith("www."+j)?4:-1)>=0&&(S=(v=(m=r.oe(J))[0]).length-1,(d=m[1])>1&&(!(c=J.length-c-j.length-v[S].length-1)||3===d&&c===v[S-1].length+1)&&(s=true))),J&&(T++,p=e.ne>0,B="",2===F.si&&(U=new RegExp("^https?://"+J.replace(z,"\\$&")+"/?$"),(b=F.ii.filter(function(t){return U.test(t.u)&&(L||t.Si)})).length>0&&(M=b.filter(function(t){return"s"===t.u[4]}),N=(R=(b=(p=M.length>0)?M:b)[0].u).endsWith("/")?R.slice(0,-1):R,B=b[0].di)),x=I=(p?"https://":"http://")+J+"/",w>0?w--:(h=s||h,n=new P("domain",x,j===k[0]?J:J+"/","",g,2),O=(C=X.hi?X.pi(x):-1)>0?X.Ui[C]:null,t(n),O&&(L||O.Si)&&(n.visit=O.Bi,B=B||O.di),n.title=r.z(B),--y)),Q.xr=E,W.ai(n?[n]:[],16)},ci:function(t){var n,e,i,u,o,l,s,f,a,c,_;for($.ci=null,n=$.Dr,e=X.M=r.M,i=0,u=t;i<u.length;i++)l=(o=u[i]).Bi,s=o.Si,(f=n(o.u))&&(c=f.Er,(_=e.get(a=f.Ir))?(_.Bi<l&&(_.Bi=l),_.Or+=s,c>=7&&(_.ne=8===c?1:0)):e.set(a,{Bi:l,Or:s,ne:8===c?1:0}))},Dr:function(t){var n,e,i=t.lastIndexOf(":",5),r=i>0?t.slice(0,i):"";if("http"===r)n=7;else if("https"===r)n=8;else{if("ftp"!==r)return null;n=6}return e=t.indexOf("/",n),{Ir:"__proto__"!==(t=t.slice(n,e<0?t.length:e))?t:".__proto__",Er:n}}},q={qt:function(t,n){!(4&j)||n&&(!k.length||256&B)?W.ai([],4):W.Hi(q.fi,t)},fi:function(t,n){var e,i,u,o,s,c,_,g,v,d,h,U,M,R,x,C,O,D,I,N,J,L,V,F,A,$,K,H,z,G,X,Z,tt,et,it,rt,ut,ot,lt,st,ft,at;if(Y.Xi(n),!t.o){if(e=m.vt,i=k.length<=0,u=3&j,s=[],(o=!!(8&B)&&E&&i&&!p)&&!(128&B)&&n.length>w&&n.length>b){for(c=new Map,_=0,g=n;_<g.length;_++)c.set((v=g[_]).id,v);for(M=(U=(h=(d=c.get(e))?d.openerTabId:0)?c.get(h):null)?U.index:d?d.index-1:0,R=U?0:b/2|0;1<--R&&M>0&&n[M-1].openerTabId===h;M--);n=M>0?n.slice(M).concat(n.slice(0,M)):n}for(x=[],C=[],O=0,D=n;O<D.length;O++)v=D[O],!E&&S&&v.incognito||(I=v.url||v.pendingUrl,N=v.text||(v.text=nt.Ji(I,v.incognito?"":I)),(i||Q.vi(N,v.title))&&(J=v.windowId,!E&&C.lastIndexOf(J)<0&&C.push(J),x.push(v)));if(u&&1===x.length&&x[0].id===m.vt&&(x.length=0),T+=L=x.length,L||(j^=4),w>=L&&!u)return w=0,W.ai(s,4);if(C.sort(q.Nr),V=i?o?q.jr:q.Jr:a,F=o?r.L():null,A=C.length>1?m.lt:0,o)for($=0,K=x;$<K.length;$++)F[(v=K[$]).id]=(z=(H=v.openerTabId)&&F[H])?z<5?z+1:5:1;for(G=32&B?1===l.Ze.o?0:f<62?Date.now()-performance.now():performance.timeOrigin:0,X=0;X<x.length;)Z=(v=x[X++]).id,tt=o?F[Z]:1,I=v.url||v.pendingUrl,et=m.Pt.get(Z),it=new P("tab",I,v.text,v.title,V,o?X:Z),rt=A&&v.windowId!==A?C.indexOf(v.windowId)+1+":":"",ut="",rt+=X,e===Z?(o||(it.r=i?1<<31:0),rt="("+rt+")"):et||(rt="**"+rt+"**"),!S&&v.incognito&&(ut+="*"),v.discarded&&(ut+="~"),it.visit=et?et.t+G:0,it.s=Z,it.label="#"+rt+(ut&&" "+ut),tt>1&&(it.level=" level-"+tt),s.push(it);if(s.sort(W.Lr),lt=w+y-(ot=s.length),u||lt<0||!i)for(w>0&&!u?(s=s.slice(w,w+y),ot=y,w=0):ot>w+y&&(s.length=ot=w+y),R=u?0:ot;R<ot;R++)s[R].r*=8/(R/4+1);else if(w>0){for(ft=0,at=st=s.slice(0,lt);ft<at.length;ft++)at[ft].label+="[r]";for(ot=(s=s.slice(w).concat(st)).length,R=0;R<ot;R++)s[R].r=ot-R;w=0}nt.Li(),W.ai(s,4)}},Nr:function(t,n){return t-n},Jr:function(t,n){var e=m.Pt.get(n);return e?e.i:4&B?2047+n:-n},jr:function(t,n){return 1/n}},K={le:0,qt:r.w,Pr:function(t,n){var e,i,u,o,s,f,a,c,_,g;if(!(8&j))return W.ai([],8);if(u=(i=k).length>0?i[0]:"",0===i.length);else{if(true!==n&&"\\"===u[0]&&"\\"!==u[1])return u.length>1?i[0]=u.slice(1):i.shift(),u=x.slice(1).trimLeft(),e=K.Vr(u),L=!J||L||Z.Fr([u]),W.ai([e],8);o=l.ce.searchEngineMap.get(u)}if(true===n){if(!o)return true}else{if(!o&&!u.startsWith("vimium://"))return 0===v&&i.length<=1&&(v=i.length?K.Ar():-1),W.ai([],8);o&&C&&(i.push(C),w=0,x+=" "+C,C="",O&=-5),i.length>1||(v=-1)}if(i.length>1&&o?(i.shift(),x.length>200&&(i=x.split(" ")).shift()):o&&(i=[]),L=!J||L&&Z.Fr([u]),o?(a=s=(c=r.ke(i,o.ye,o.w,[])).ye,f=c.xe):(a=s=i.join(" "),f=[]),"~"===u);else if(s.startsWith("vimium://")){if(_=r.J(s.slice(9),1,true),g=K.$r.bind(K,i,s,a,o,f),_ instanceof Promise)return _.then(K.qr.bind(K,t,g));if(_ instanceof Array)return K.qr(t,g,_);_&&(s=a=_,f=[])}else s=r.V(s,null,-2);return e=K.$r(i,s,a,o,f),W.ai([e],8)},qr:function(t,n,e){var i,u,o,l,s;if(!t.o){switch(e[1]){case 5:case 6:if(v=6===e[1]&&k.length>1?v:-1,!(u=e[0]))break;return C="",(k=((x="\\ "+u).length<201?x:r.j(x,0,200).trim()).split(" ")).length>1&&(k[1]=r.je(k[1],k.length>2)),K.Pr(t);case 2:if(k=(o=e[0]).length>1||1===o.length&&o[0]?o:k,(l=K.le++)>12)break;if(s=K.Pr(t,true),l<=0&&(K.le=0),true!==s)return s;break;case 0:e[0]&&(i=K.Kr(n(),e))}W.ai(i||[n()],8)}},$r:function(t,n,u,o,l){var s=new P("search",n,u,(o?o.Pe+": ":"")+t.join(" "),g,9);return t.length>0&&o?(s.t=K.Wr(u,l),s.title=e(s.title,[o.Pe.length+2,s.title.length]),s.textSplit=e(s.t,l)):(s.t=r.K(i(u)),s.title=r.z(s.title),s.textSplit=r.z(s.t)),p||(s.v=o&&o.w||K.a(n)),s.p=o?o.Pe:"",s},Kr:function(t,n){var e=n[0],i=new P("math","vimium://copy "+e,e,e,g,9);return--i.r,i.title='<match style="text-decoration: none;">'+r.z(i.title)+"<match>",i.textSplit=r.z(n[2]),[t,i]},a:function(t){for(var n=X.hi&&t.startsWith("http")?X.pi(t):-1,e=n<0?~n-1:n,i=e<0?[]:X.Ui,r=t.indexOf(":")+3,u=0,o=0,l="",s="",f=0,a=0;u<=e&&(r="/"===t[r]?r+1:t.indexOf("/",r+1)+(o?0:1))>0;o=r){for(l=t.slice(o,r),a=e;u<=a;)if((s=i[f=u+a>>>1].u.slice(o))>l)a=f-1;else{if(s===l)return o?i[f].u:"";u=f+1}if(u<=e&&o&&"/"===(l=i[u].u)[r]&&l.length<=++r)return l}return""},Hr:0,gr:0,Ar:function(){var t=k[0],n=l.ce.searchKeywords;return null==n?(K.gr=K.gr||setTimeout(K.Qr,67),-2):t.length>=K.Hr?0:n.includes("\n"+t)?-2:0},Wr:function(t,n){var e,i,u,o=n.length;if(i=r.K(n.length>0?t.slice(0,n[0]):t),(e=r.Te(i))&&(i=i.slice(e),e=0),n.length<=0)return i;for(u=n[0];n[e]=i.length,o>++e;)i+=r.K(t.slice(u,n[e])),u=n[e];return u<t.length&&(i+=r.K(t.slice(u))),i},Vr:function(t){var n=r.V(t,null,-2),u=4===r.B,o=new P("search",n,r.K(i(n)),"",g,9);return o.title=u?"~: "+e(t,[0,t.length]):r.z(t),o.textSplit=r.z(o.t),p||(o.v=K.a(n)),o.p=u?"~":"",o},Qr:function(){var t,n,e,i=r.h(l.ce.searchEngineMap).sort(),u=0,o="",s=[];for(t=i.length;0<=--t;)o.startsWith(n=i[t])||(u=(e=n.length)>u?e:u,o=n,s.push(n));l.in("searchKeywords","\n"+s.join("\n")),K.Hr=u,K.gr=0}},W={zr:0,Gr:0,Wi:null,Xr:null,Ki:null,qt:function(t){var n,e,i,r;if(W.Xr&&(W.Xr.o=true),n=W.Xr={o:false},W.Gr=0,e=1,i=-9&(j&=t[0])?t.length:2,W.Wi=[],W.zr=i-1,v=w&&-1,t[1]===K){if(r=K.Pr(n),i<3)return;if(r)return void r.then(W.Zr.bind(null,t,n,e));e=2}W.Zr(t,n,e)},Zr:function(t,n,e){for(Q.ei=Date.now()-18144e5,Q.xr=3*k.length||.01,k.indexOf("__proto__")>=0&&(k=k.join(" ").replace(/(^| )__proto__(?=$| )/g," __proto_").trimLeft().split(" ")),Y.wr(),k.sort(W.Yr),G.tu();e<t.length;e++)t[e].qt(n,e-1)},Yr:function(t,n){return n.length-t.length||(t<n?-1:t===n?0:1)},Hi:function(t,n,e){var i,r=m.ft;null===S&&(r=1!==r?r:f>=52||l.E.qn||!!Y.Pt.Pt?m.ft=0:1),1!==r?(Y.Pt.nu!==(i=((S=2!==r)?2:0)|(E?1:0))&&(Y.Pt={Pt:null,nu:i}),(e=e||Y.Pt.Pt)?t(n,e):chrome.tabs.query(E?{currentWindow:true}:{},t.bind(null,n))):chrome.windows.getCurrent({populate:E},function(e){m.ft=S?0:2,n.o||W.Hi(t,n,E?e.tabs:null)})},ai:function(t,n){var e=W.Wi,i=t.length;if(i>0&&(W.Gr|=n,W.Wi=0===e.length?t:e.concat(t),8===n&&(h=!0,y-=i,T+=i)),0==--W.zr)return e=null,W.eu()},eu:function(){var n,e,r,u,o,l,s,f,a,c,_,g,m=W.Wi;return W.Wi=null,m.sort(W.Lr),w>0?(m=m.slice(w,w+b),w=0):m.length>b&&(m.length=b),G.iu=G.ru=null,k.length>0&&(e=i(n=k[0]),((r=n.length!==e.length)||n.endsWith("/")&&n.length>1&&!n.endsWith("//"))&&(k[0]=r?e:n.slice(0,-1),G.uu())),m.forEach(t),u=m.length>0,o=h&&u,l=T,s=":"===M,a=R,c=O,_=2!=(f=v<0?-2!==v||u?0:3:L?k.length<=0||D?0:u?2:s?3:1:0)||s?0:W.Gr,g=W.Ki,W.ou(),g(m,o,f,_,l,a,c)},ou:function(){W.Xr=W.Ki=S=null,k=[],M=R=x=C=I=N="",G.ti=null,Q.xr=3,Q.ei=v=W.Gr=B=y=b=T=U=0,j=0,O=0,h=p=false,D=E=false,L=true},lu:function(){var t,n,e=x;if(w=0,C="",!(0===e.length||(t=(e=e.slice(-5)).lastIndexOf("+"))<0||0!==t&&32!==e.charCodeAt(t-1))){if(e=e.slice(t),t=x.length-e.length,(n=parseInt(e,10))>=0&&"+"+n===e&&n<=(t>0?100:200))w=n;else if("+"!==e)return;x=x.slice(0,t&&t-1),C=e,O|=4}},Lr:function(t,n){return n.r-t.r}},H={__proto__:null,bookm:[1,F],domain:[16,$],history:[2,A],omni:[63,K,$,A,F,q],search:[8,K],tab:[4,q]},Q={vi:function(t,n){var e,i,r=G.ti;for(e=0,i=k.length;e<i;e++)if(!(r[e].test(t)||r[e].test(n)))return false;return true},xr:3,su:[0,0],fu:function(t,n){var e,i=0;return(e=n.split(G.ti[t]).length)<1?Q.su:(i=1,G.ru[t].test(n)&&(i+=1,G.iu[t].test(n)&&(i+=1)),[i,(e-1)*k[t].length])},ni:function(t,n){var e,i,r,u=0,o=0,l=0,s=0,f=!!n;for(G.ru||G.au(),e=0,i=k.length;e<i;e++)s+=(r=Q.fu(e,t))[0],l+=r[1],f&&(o+=(r=Q.fu(e,n))[0],u+=r[1]);return s=s/Q.xr*Q.cu(l,t.length),0===u?n?s/2:s:s<(o=o/Q.xr*Q.cu(u,n.length))?o:(s+o)/2},ei:0,cu:function(t,n){return t<n?t/n:n/t}},z=/[$()*+.?\[\\\]\^{|}]/g,G={ti:null,ru:null,iu:null,tu:function(){var t,n,e,i=G.ti=[];for(G.ru=G.iu=null,t=0,n=k;t<n.length;t++)e=n[t],i.push(new RegExp(e.replace(z,"\\$&"),e!==e.toUpperCase()&&e.toLowerCase()===e?"i":""))},au:function(){var t,n,e,i,r,u=G.ru=[],o=G.iu=[];for(t=0,n=G.ti;t<n.length;t++)i="\\b"+(e=n[t]).source,r=e.flags,u.push(new RegExp(i,r)),o.push(new RegExp(i+"\\b",r))},uu:function(){G.ti&&(G.ti[0]=new RegExp(k[0].replace(z,"\\$&"),G.ti[0].flags))}},X={_u:0,Vi:0,Fi:0,hi:false,$i:0,Ui:null,gu:null,M:null,qi:function(t){X.gu?t&&X.gu.push(t):(X.gu=t?[t]:[],X._u=Date.now(),X.$i||chrome.history.search({text:"",maxResults:2e4,startTime:0},function(t){setTimeout(X.mu,0,t)}))},mu:function(t){var n,e,i,r,u,o,l;for(X.mu=null,n=0,e=t.length;n<e;n++)(r=(i=t[n]).url).length>2e3&&(r=X.Zi(r,i)),t[n]={t:r,di:i.title,Bi:i.lastVisitTime,Si:1,u:r};if(J)for(u=0,o=t;u<o.length;u++)0===Z.Oi((l=o[u]).t,l.di)&&(l.Si=0);setTimeout(function(){setTimeout(function(){var t,n,e,i,r,u,o,l,s=X.Ui;for(t=s.length-1;0<t;)for(r=(i=(n=s[t]).t=nt.Ji(e=n.u,n)).length>=e.length;0<=--t&&!((o=(u=s[t]).u).length>=e.length)&&e.startsWith(o);)u.u=e.slice(0,o.length),l=r?o:nt.Ji(o,u),u.t=r||l.length<o.length?i.slice(0,l.length):l;X.M||setTimeout(function(){$.ci&&$.ci(X.Ui)},200)},100),X.Ui.sort(function(t,n){return t.u>n.u?1:-1}),X.hi=true,chrome.history.onVisitRemoved.addListener(X.vu),chrome.history.onVisited.addListener(X.du)},100),X.Ui=t,X.qi=function(t){t&&t(X.Ui)},X.gu&&X.gu.length>0&&setTimeout(function(t){var n,e;for(n=0,e=t;n<e.length;n++)(0,e[n])(X.Ui)},1,X.gu),X.gu=null},du:function(t){var n,e,i,r,u,o,l,s,f,a=t.url;if(a.length>2e3&&(a=X.Zi(a,t)),n=t.lastVisitTime,e=t.title,i=++X.Vi,r=X.M,(u=X.pi(a))<0&&X.Fi++,(i>59||i>10&&Date.now()-X._u>3e5)&&X.Ai(),o=u>=0?X.Ui[u]:{t:"",di:e,Bi:n,Si:J?Z.Oi(a,e):1,u:a},r&&(s=$.Dr(a))&&((l=r.get(s.Ir))?(l.Bi=n,u<0&&(l.Or+=o.Si),s.Er>=7&&(l.ne=8===s.Er?1:0)):r.set(s.Ir,{Bi:n,Or:o.Si,ne:8===s.Er?1:0})),u>=0)return o.Bi=n,void(e&&e!==o.di&&(o.di=e,Y.gr&&Y.zt(1),J&&(f=Z.Oi(a,e),o.Si!==f&&(o.Si=f,l&&(l.Or+=f||-1)))));o.t=nt.Ji(a,o),X.Ui.splice(~u,0,o),Y.gr&&Y.zt(1)},vu:function(t){var n,e,i,u,o,l,s,f,a,c,_,g,m;if(nt.Su.length=0,n=nt.ji,Y.zt(1),t.allHistory){for(X.Ui=[],X.M&&(X.M=r.M=new Map),e=new Map,i=0,u=F.ii;i<u.length;i++)n.delete((o=u[i]).u);nt.ji=e}else for(l=X.pi,s=X.Ui,f=X.M,c=0,_=t.urls;c<_.length;c++)(o=l(g=_[c]))>=0&&(f&&s[o].Si&&(m=$.Dr(g))&&(a=f.get(m.Ir))&&--a.Or<=0&&f.delete(m.Ir),s.splice(o,1),n.delete(g))},Zi:function(t,n){var e=t.lastIndexOf(":",9),i=e>0&&"://"===t.substr(e,3),u=n.title;return t=t.slice(0,(i?t.indexOf("/",e+4):e)+320)+"\u2026",u&&u.length>160&&(n.title=r.j(u,0,160)),t},Ai:function(){var t=Date.now();if(X.Fi<=0);else{if(t<X._u+1e3&&t>=X._u)return;setTimeout(chrome.history.search,50,{text:"",maxResults:Math.min(999,X.Vi+10),startTime:t<X._u?t-3e5:X._u},X.hu)}return X._u=t,X.Fi=X.Vi=0,nt.Li()},hu:function(t){var n,e,i,r,u,o,l=X.Ui,s=X.pi;if(!(l.length<=0))for(n=0,e=t;n<e.length;n++){if((r=(i=e[n]).url).length>2e3&&(i.url=r=X.Zi(r,i)),(u=s(r))<0)X.Fi--;else if(!(o=i.title)||o===l[u].di)continue;X.Vi--,X.du(i)}},pi:function(t){for(var n="",e=X.Ui,i=e.length-1,r=0,u=0;r<=i;)if((n=e[u=r+i>>>1].u)>t)i=u-1;else{if(n===t)return u;r=u+1}return~r}},Z={Oi:function(t,n){var e,i,r;for(e=0,i=J;e<i.length;e++)if(n.includes(r=i[e])||t.includes(r))return 0;return 1},Fr:function(t){var n,e,i,r,u,o;if(J)for(n=0,e=t;n<e.length;n++)for(i=e[n],r=0,u=J;r<u.length;r++)if(o=(o=u[r]).trim(),i.includes(o)||o.length>9&&i.length+2>=o.length&&o.includes(i))return true;return false},pu:function(){var t,n,e,i,r,u,o,l,s;if(F.ii)for(t=0,n=F.ii;t<n.length;t++)(e=n[t]).Si=J?Z.Oi(e.t,e.oi):1;if(X.Ui)for(i=X.M,r=0,u=X.Ui;r<u.length;r++)e=u[r],o=J?Z.Oi(e.t,e.di):1,e.Si!==o&&(e.Si=o,i&&(l=$.Dr(e.u))&&(s=i.get(l.Ir))&&(s.Or+=o||-1))},Bu:function(t){var n,e,i,r=[];for(n=0,e=t.split("\n");n<e.length;n++)(i=e[n]).trim()&&"#"!==i[0]&&r.push(i);J=r.length>0?r:null,(X.Ui||F.ii)&&setTimeout(Z.pu,100)}},Y={mi:null,gi:null,Pt:{Pt:null,nu:0},Uu:[],gr:0,yu:0,wr:function(){var t,n,e,i,r,u=k,o=null,s=0,f=u.join(" ");for(t=Y.Uu,n=f?t.length:0;0<=--n;)if(t[n].bu||!L){for(e=t[n].kt,i=0,r=0;i<e.length&&r<u.length;r++)u[r].includes(e[i])&&i++;if(i>=e.length){o=t[n];break}}Y.mi=o,o&&(l.en.t<200||!o.Ui||o.Ui.length>1e3)&&(s=V.now())-o.Bi<Math.max(300,1.3*l.en.t)?(Y.gi=o,o.kt=u.slice(0)):!f||o&&f===o.kt.join(" ")||!(f.length>4||/\w\S|[^\x00-\x80]/.test(f))?Y.gi=null:(Y.gi={kt:u.slice(0),bu:L,Bi:s||V.now(),Ui:o&&o.Ui,ii:o&&o.ii},Y.Uu.push(Y.gi),Y.gr||(Y.gr=setInterval(Y.Tu,6e3)))},Tu:function(){for(var t=Y.Uu,n=-1,e=V.now()-5983;++n<t.length&&t[n].Bi<e;);++n<t.length?t.splice(0,n):(t.length=0,clearInterval(Y.gr),Y.gr=0)},zt:function(t){var n,e,i;for(n=0,e=Y.Uu;n<e.length;n++)i=e[n],t<2?i.Ui=null:t<3?i.ii=null:Y.Pt.Pt=null},Xi:function(t){Y.Pt.Pt!==t&&(Y.yu&&(clearTimeout(Y.yu),Y.yu=0),Y.Pt.Pt=t,t&&(Y.yu=setTimeout(Y.Xi,3e3,null)))}},tt=decodeURIComponent,nt={Ji:function(t,n){if(t.length>=400||t.lastIndexOf("%")<0)return t;try{return tt(t)}catch(t){}return nt.ji.get(t)||(n&&nt.Su.push(n),t)},xi:function(t){for(var n,e,i=nt.ji,r=nt.Su,u=-1,o=t.length;;)try{for(;++u<o;)(n=t[u]).t=(e=n.u).length>=400||e.lastIndexOf("%")<0?e:tt(e);break}catch(t){n.t=i.get(e)||(r.push(n),e)}nt.Li()},ji:new Map,Su:[],wu:-1,Li:function(){0!==nt.Su.length&&-1===nt.wu&&(nt.wu=0,setTimeout(nt.ku,17,null))},ku:function(t){for(var n,e,i,r,u,o,l;nt.wu<nt.Su.length;nt.wu++){if(!(n=nt.ji.get(r=(i="string"==typeof(e=nt.Su[nt.wu]))?e:e.u)))return t||(t=nt.Mu())?(l=(o=(u=f>=66?r.split("#",3):[]).length)<2?r:o<3?u[0]+"%23"+u[1]:r.replace(/#/g,"%23"),t.open("GET",nt.Ru+l,true),t.send()):(nt.Su.length=0,void(nt.wu=-1));i||(e.t=n)}},xu:function(){if(!(nt.wu<0)){var t=this.responseText,n=nt.Su[nt.wu++];"string"!=typeof n?nt.ji.set(n.u,n.t=t):nt.ji.set(n,t),nt.wu<nt.Su.length?nt.ku(this):(nt.Su.length=0,nt.wu=-1)}},Ni:true,Ru:"1",Mu:function(){if(!nt.Ru)return null;var t=new XMLHttpRequest;return t.responseType="text",t.onload=nt.xu,t},Cu:function(t){var n=!!t&&!(t=t.toLowerCase()).startsWith("utf"),e=n?"data:text/plain;charset="+t+",":"",i=nt.Ru;e!==i&&(nt.Ru=e,n?"1"!==i&&setTimeout(function(){return X.Ui&&nt.xi(X.Ui),nt.xi(F.ii)},100):(nt.ji.clear(),nt.Su.length=0),nt.Ni!==n&&(nt.Su=n?[]:{length:0,push:r.w},nt.Ni=n,nt.wu=-1))}};d={qt:function(t,n,e){var i,u,o,l;h=false,M=x=(t=t.trim())&&t.replace(r.O," "),R="",O=0,W.lu(),k=(t=x)?(t=t.length<201?t:r.j(t,0,200).trimRight()).split(" "):[],(U=0|n.c||128)&&(U-=t.replace(/[\u2e80-\u2eff\u2f00-\u2fdf\u3000-\u303f\u31c0-\u31ef\u3200-\u9fbf\uf900-\ufaff\ufe30-\ufe4f\uff00-\uffef]/g,"aa").length-t.length),U=Math.max(50,Math.min(U,320)),p=!!(1&(B=n.f)),b=y=Math.min(Math.max(3,0|n.r||10),25),T=0,W.Ki=e,i="bomni"===n.o?(B|=64,H.omni):H[n.o],o=n.t,i===H.tab&&(E=!!(2&B)),h=null!=i&&1===i.length,2===(u=k.length>=1?k[0]:"").length&&":"===u[0]&&(i="b"===(u=u[1])?H.bookm:"h"===u?H.history:"t"===u||"w"===u||"W"===u?(E="t"!==u,B|=0,H.tab):"B"===u?(B|=64,H.omni):"H"===u?(B|=256,H.omni):"d"===u?H.domain:"s"===u?H.search:"o"===u?H.omni:null)&&(h=1===i.length,R=k.shift(),O|=1,x=x.slice(3),0!==o&&(i=null)),k.length>0&&((u=k[0]).includes("\u3002")||u.includes("\uff1a"))&&(D=k.length<2,(l=r.je(u,D))!==u?(k[0]=l,x=l+x.slice(u.length),D=D&&!/^[.\u3002](\w+[.\u3002]?)*$/.test(u)):D=D&&u.includes("\uff1a")&&!/\uff1a([^\/\d]|\d[^\0-\xff])/.test(u)),L=!J||Z.Fr(k),j=0!==o?o:63,x&&(O|=2),W.qt(i||H.omni)},Zt:function(t,n,e){switch(n){case"tab":chrome.tabs.remove(+t,function(){var t=r.x();return t||Y.Xi(null),e(!t),t});break;case"history":var i=!X.hi||X.pi(t)>=0;chrome.history.deleteUrl({url:t}),i&&Y.zt(1),e(i)}},yr:function(){Y.Pt.Pt&&(1&Y.Pt.nu||!(2&Y.Pt.nu)!=(2===m.ft))&&Y.Xi(null)},Ou:Z.Fr},l.mn.omniBlockList=Z.Bu,l.hn("omniBlockList"),l.mn.localeEncoding=nt.Cu,l.hn("localeEncoding"),r.Ae(80,function(){l.hn("searchEngines",null)})});var d={qt:function(t,n,e){r.Ae(210,function(){return d.qt(t,n,e)})},Zt:r.w,yr:r.w};r.Ae(1e3,function(){var t,n,e,i,u,o,s,f,a,c,_,g,m,v=r.T({findModeRawQueryList:1,innerCSS:1,keyboard:1,newTabUrl_f:1,vomnibarPage_f:1}),d=null,S="",h=null,p=null,B=null,U=function(){return t||(t=chrome.storage&&chrome.storage.sync)},y=function(t){b(t,"sync")},b=function(t,n){var e,i,u,o;if("sync"===n){if(e=function(t){var n,e,i,u;if(h){for(n in r.T(t),h)!(i=(e=n.split(":")[0])===n)&&e in h||w(e,null!=(u=i?h[n]:null)?u.newValue:t[e],t);h=null}},r.T(t),i=l.Rn&&l.Rn())return h&&r.r(t,h),h=t,void i.then(function(){return b({},n)});for(u in h&&(r.r(t,h),h=null),t){if(o=t[u],8===(u.includes(":")?8:w(u,null!=o?o.newValue:null)))return h=t,void U().get(e);delete t[u]}}},T=function(){var t,n=[];for(t=0;t<arguments.length;t++)n[t]=arguments[t];console.log.apply(console,[(new Date).toLocaleString()].concat.call([].slice.call(arguments,0)))},w=function(t,n,e){var i,r,u,o,f,a;if(t in l.rn&&!(t in l.sn)&&c(t)){if(i=l.rn[t],r=n&&"object"==typeof n&&n.$_serialize||""){if("split"===r&&!e)return 8;if(8===(n=s(t,n,e)))return}null!=n?(u=B?i:l.on(t),(a="object"!=typeof i)?(f=n,o=u):(f=JSON.stringify(n),o=JSON.stringify(u)),f!==o&&(f===(u=a?i:JSON.stringify(i))&&(n=i),B||T("sync.this: update",t,"string"==typeof n?(n.length>32?n.slice(0,30)+"...":n).replace(/\n/g,"\\n"):n),k(t,n))):null!=localStorage.getItem(t)&&(B||T("sync.this: reset",t),k(t,i))}},k=function(t,n){var e="keyMappings"===t||"exclusionRules"===t?"KeyMappings":"";if(!e)return M(t,n);r.me(e).then(M.bind(null,t,n)),r.Fe()},M=function(t,n){S=t,l.in(t,n),S="",t in l.un&&l.pn({N:6,d:[l.un[t]]})},R=function(t,n){c(t)&&t!==S&&(d||(setTimeout(a,800),d=r.L()),d[t]=n)};if(e=function(t,n){var e,i,u;U()?(i=chrome.storage.local,u=function(){var n=r.x();if(n)return T("storage.local: Failed to update",t,":",n.message||n),n},null==n?i.remove(t,u):i.set(((e={})[t]=n,e),u)):l.cn=r.w},i=function(t){return t.replace(/[<`\u2028\u2029]/g,function(t){return"<"===t?"`l":"`"===t?"`d":"\u2028"===t?"`r":"`n"})},u=function(t){return t.replace(/"|\\[\\"]/g,function(t){return'"'===t?"`q":'\\"'===t?"`Q":"`S"})},o=function(t){var n={Q:'\\"',S:"\\\\",d:"`",l:"<",n:"\u2029",q:'"',r:"\u2028"};return t.replace(/`[QSdlnqr]/g,function(t){return n[t[1]]})},s=function(t,n,e){var i,r,u,s,f="";switch(n.$_serialize){case"split":for(i=n.k,r=n.s,u=0;u<r;u++){if(!(s=e[t+":"+u])||!s.startsWith(i))return 8;f+=s.slice(i.length)}break;case"single":return JSON.parse(o(JSON.stringify(n.d)));default:return T("Error: can not support the data format in synced settings data:",t,":",n.$_serialize),null}return"string"==typeof l.rn[t]?f=o(f):(f=o(JSON.stringify(f)),JSON.parse(f.slice(1,-1)))},f=function(t,n,e){var r,o,s,f,a,c,_,g,m,v,d,S;if(n&&!("string"!=typeof n?"object"!=typeof n:n.length<8192/6-40)&&(o="",!((r=JSON.stringify(n)).length<8192/6-40))){if(4*(r=i(r)).length<8093)return r;if((o=e.encode(r)).length<8093)return r;for(s=0,f=Date.now().toString(36)+":",a={},r="string"==typeof l.rn[t]?r.slice(1,-1):u(r),p||(p=new TextDecoder),c=0,_=(o=e.encode(r)).length;c<_;){for(g=Math.min(c+8134,_),m=void 0,v=0;g<_&&128==(192&o[g]);g--);if((v=(r=(m=p.decode(o.subarray(c,g))).slice(-6)).lastIndexOf("\\"))>r.length-2)m+="b",v=1;else if(v>0&&"u"===r[v+1])for(d=v=r.length-v;d++<6;m+="b");else v=0;if(m=JSON.parse('"'+m+'"'),v&&((S=m.endsWith("b"))||(g-=v),m=m.slice(0,v>1&&S?v-6:-1)),a[t+":"+s++]=f+m,c=g,s>=13)break}return a[t]={$_serialize:"split",k:f,s:s},a}},a=function(){var t,n,e,i,u,o,s,a,c=d,_=[],g=[],m=[],v=r.L(),S={};if(d=null,c&&l.cn===R){for(n in t=new TextEncoder,c)for(i=c[e=n],o="string"==typeof(u=l.rn[e])||"object"==typeof u&&"vimSync"!==e?0:13,null!=i?(s=f(e,i,t))&&"object"==typeof s?(v[e]=s,o=s[e].s):(S[e]=s?{$_serialize:"single",d:JSON.parse(s)}:i,g.push(e)):(m.push(e),_.push(e));o<13;o++)m.push(e+":"+o);for(e in p=t=null,_.length>0&&T("sync.cloud: reset",_.join(", ")),m.length>0&&U().remove(m),g.length>0&&(T("sync.cloud: update",g.join(", ")),U().set(S)),a=function(t){U().set(v[t],function(){var n=r.x();return n?T("Failed to update",t,":",n.message||n):T("sync.cloud: update (serialized) "+t),n})},v)a(e)}},c=function(t){return!(t in v)},_=function(t){l.He.Ge=null,r.Ae(t,function(){chrome.storage.local.get(function(t){var n,i,u,o,s,f,a,_,g;if(!l.on("vimSync")&&localStorage.length){for(T("storage.local: backup all settings from localStorage"),r.T(t),n=0,i=localStorage.length;n<i;n++)(u=localStorage.key(n))in l.rn&&(c(u)||"keyboard"===u)&&(o=l.rn[u],s=t[u],a=f=l.on(u),_=s,"object"==typeof o&&(_=JSON.stringify(s),a=JSON.stringify(f)),a!==_&&e(u,f),delete t[u]);(g=Object.keys(t)).length>0&&chrome.storage.local.remove(g)}})})},g=function(t,i,u){var o,s,f,a,_,g,m,v,d,h,p,y,k,M;if(2&i&&chrome.storage.local.get(function(t){var n,e,o,s,f=r.x();if(f)return l.Rn=null,(i-=2)||u(),f;for(o in r.T(t),e=void 0!==(n=t.vimSync)||Object.keys(t).length>0,delete t.vimSync,e&&T("storage.local: restore settings to localStorage"),t)o in l.rn&&(S=o,s=null==(s=t[o])?l.rn[o]:s,l.in(o,s));S="",null!=n&&l.in("vimSync",n),r.Ae(100,function(){l.pn({N:6,d:l.Ze})}),(i-=2)||u()}),2!==i){if(r.T(t),!(o=t.vimSync||l.on("vimSync")))return n=o,l.cn=e,void(--i||u());for(f in t.vimSync||(T("sync.cloud: enable vimSync"),t.vimSync=o,U().set({vimSync:o})),s=[],t)f in l.xn&&s.push(f);for(a=[],_={},g=0,m=s;g<m.length;g++)for(f=m[g],v=l.xn[f],d=-1,h=void 0;d<13&&(h=d<0?f:f+":"+d)in t;d++)_[p=d<0?v:v+":"+d]=t[p]=t[h],delete t[h],a.push(h);for(s.length>0&&(chrome.storage.onChanged.removeListener(b),l.cn=r.w,U().remove(a),U().set(_,r.x),s.length=0),d=0,y=localStorage.length;d<y;d++)!((f=localStorage.key(d))in t)&&f in l.rn&&c(f)&&s.push(f);for(k=0,M=s;k<M.length;k++)w(f=M[k],null);for(f in t)f.includes(":")||w(f,t[f],t);l.hn("vimSync"),r.Ae(4,function(){--i||u()}),B&&T("sync.cloud: download settings to localStorage")}},l.mn.vimSync=function(t){var i,r,u;if(n=t,U()){if(r=(i=U().onChanged)||chrome.storage.onChanged,u=i?y:b,!t)return r.removeListener(u),void(l.cn!==e&&(l.cn=e,_(600)));l.cn!==R&&(r.addListener(u),l.cn=R,chrome.storage.local.clear())}},l.Rn=function(){if(B);else{if(localStorage.length)return null;r.Fe(),B=r.me("KeyMappings").then(function(){return new Promise(function(t){n?U().get(function(n){var e=r.x();return e?(l.Rn=null,t()):g(n,1,t),e}):g({},2,t)})}).then(function(){B=null})}return B},false===(n=l.on("vimSync"))||!n&&!l.He.De)return m=l.He.Ge,l.He.Ge=m?null:_,m&&_(6e3),void(l.cn=e);r.Fe(),U()?U().get(function(t){var n=r.x();if(n)return T("Error: failed to get storage:",n,"\n\tSo disable syncing temporarily."),l.mn.vimSync=l.cn=r.w,l.Rn=null,n;B=Promise.resolve(),B=new Promise(function(n){return g(t,3,n)}).then(function(){B=null})}):l.Rn=null}),r.Ae(150,function(){var t,e,i,u,o=chrome.browserAction;o&&(i=l.mn.showActionIcon,u=function(n){var i,u=l.jn[n],o=function(i){var u,o,l,s=new Uint8ClampedArray(i),f=i.byteLength/5,c=0|Math.sqrt(f/4),_=c+c,g=r.L();for(g[c]=new ImageData(s.subarray(0,f),c,c),g[_]=new ImageData(s.subarray(f),_,_),t[n]=g,u=e.get(n),e.delete(n),o=0,l=u.length;o<l;o++)a.ct(u[o],n,true)};f>=47?fetch(u).then(function(t){return t.arrayBuffer()}).then(o):((i=new XMLHttpRequest).open("GET",u,true),i.responseType="arraybuffer",i.onload=function(){o(this.response)},i.send())},l.He.Ye=function(n){var i,r,u;if(null==n)return!!t;if(n){if(!t)for(r in t=[null,null,null],e=new Map,i=a.gn())0!==(u=i[+r][0].s).s&&a.ct(u.t,u.s)}else t&&setTimeout(function(){l.on("showActionIcon")||(t=null,e=null)},200)},a.ct=function(n,i,l){var s,f,a;(s=t[i])?(f=o.setIcon,a={tabId:n,imageData:s},l?f(a,r.x):f(a)):e.has(i)?e.get(i).push(n):(setTimeout(u,0,i),e.set(i,[n]))},l.mn.showActionIcon=function(t){i(t),l.He.Ye(t);var e=n("name");t||(e+="\n\n"+n("noActiveState")),o.setTitle({title:e})},l.hn("showActionIcon"))}),r.Ae(600,function(){function t(){v&&(v.Du=null),h=B=v=_=null,U&&clearTimeout(U),S&&clearTimeout(S),y=T=w=U=S=0,g="",r.y()}function n(){var e=Date.now()-y;if(e>5e3||e<-5e3)return t();U=setTimeout(n,3e4)}function e(){var t,n;if(S=0,(t=v)&&!t.Eu)return v=null,t.Du?((n=Date.now())<y&&(y=n-1e3),u(t.eo,t.Du)):void 0}function i(t,n,e,i,u){var o,l,s,f,a,d,S,p,U,y,k,M,R,x,C,O,D;if(t.Du){for(v=null,l=(o=n.length>0)?n[0]:null,f={},T=i,w=u,o&&(c||null!=n[0].s)&&(h=new Map),B=[],a=new Set,d=0,S=e?0:1,p=n.length;d<p;d++)y=(U=n[d]).title,k=U.u,M=U.e,R="",x=null!=U.s,C=c&&!(e&&0===d)&&("tab"===M?U.s!==m.vt:"history"===M&&!x),a.has(k)?k=":"+(d+S)+" "+k:a.add(k),C&&(f.nu=M,R=" ~"+(d+S)+"~"),O={content:k,description:R="<url>"+U.textSplit+(R=y?"</url><dim> - "+y+R+"</dim>":R?"</url><dim>"+R+"</dim>":"</url>")},C&&(O.deletable=true),x&&(f.Tr=U.s),(C||x)&&(h.set(k,f),f={}),B.push(O);if(_=t.eo,e)if("search"===l.e){if(s=((D=l.p)&&"<dim>"+r.z(D)+" - </dim>")+"<url>"+l.textSplit+"</url>",b=2,l=n[1])switch(l.e){case"math":B[1].description="<dim>"+l.textSplit+" = </dim><url><match>"+l.t+"</match></url>"}}else b=3,s=B[0].description;else 1!==b&&(s="<dim>Open: </dim><url>%s</url>",b=1);e&&(g=n[0].u,B.shift()),s&&chrome.omnibox.setDefaultSuggestion({description:s}),t.Du(B),r.y()}else v===t&&(v=null)}function u(t,u){var o,s,f,a;t=t.trim().replace(r.O," "),v&&(v.Du=(o=t===v.eo)?u:null,o)||(t!==_?1===T&&t.startsWith(_)?u([]):(v={Du:u,eo:t,Eu:false},S||(s=Date.now(),(f=l.en.t+y-s)>30&&f<3e3?S=setTimeout(e,f):(v.Eu=true,U||(U=setTimeout(n,3e4)),y=s,h=B=null,g="",a=T<2||!t.startsWith(_)?0:3===T?t.includes(" ")?0:8:w,d.qt(t,{o:"omni",t:a,r:k,c:p,f:1},i.bind(null,v))))):B&&u(B))}function o(t,n,e){return t?":"===t[0]&&/^:([1-9]|1[0-2]) /.test(t)&&(t=t.slice(" "===t[2]?3:4)):t=r.V(""),"file://"===t.slice(0,7).toLowerCase()&&(t=r.Re(t)),null!=e?a.ot[5]({s:e}):a.ot[6]({u:t,r:"currentTab"===n?0:"newForegroundTab"===n?-1:-2},null)}var s,c,_,g,v,S,h,p,B,U,y,b,T,w,k,M=chrome.omnibox;M&&(c=!!(s=M.onDeleteSuggestion)&&"function"==typeof s.addListener,_=null,g="",v=null,S=0,h=null,p=128,B=null,U=0,b=0,T=0,w=0,k=f<60?6:12,M.onInputStarted.addListener(function(){if(chrome.windows.getCurrent(function(t){var n=t&&t.width;p=n?Math.floor((n-160/devicePixelRatio)/7.72):128}),U)return t()}),M.onInputChanged.addListener(u),M.onInputEntered.addListener(function n(i,u){var l,s=v;if(s&&s.Du){if(s.Du=n.bind(null,i,u),s.Eu)return;return S&&clearTimeout(S),e()}return i=i.trim().replace(r.O," "),null===_&&i?d.qt(i,{o:"omni",t:0,r:3,c:p,f:1},function(t,n){return n?o(t[0].u,u,t[0].s):o(i,u)}):(g&&i===_&&(i=g),l=h&&h.get(i)&&h.get(i).Tr,t(),o(i,u,l))}),c&&s.addListener(function(t){var n=parseInt(t.slice(t.lastIndexOf("~",t.length-2)+1))-1,e=B&&B[n].content,i=e&&h&&h.get(e)||null,r=i&&i.nu;if(r)return":"===e[0]&&(e=e.slice(e.indexOf(" ")+1)),a.Zt({t:r,u:"tab"===r?i.Tr:e});console.log("Error: want to delete a suggestion but no related info found (may spend too long before deleting).")}))}),chrome.runtime.onInstalled.addListener(l.He.Be=function(t){var e=t.reason;if("install"===e)e="";else{if("update"!==e)return;e=t.previousVersion}l.He.Be&&(chrome.runtime.onInstalled.removeListener(l.He.Be),l.He.Be=null,r.Ae(500,function(){var i,u;chrome.tabs.query({status:"complete"},function(t){var n,e,i,u,o=chrome.tabs,s=r.x,f=/^(file|ftps?|https?):/,a=location.origin.length,c=l.E.Cn;for(n=t.length,e=c.length-1;0<=--n;)if(f.test(t[n].url))for(i=t[n].id,u=0;u<e;++u)o.executeScript(i,{file:c[u].slice(a),allFrames:true},s)}),console.log("%cVimium C%c has been %cinstalled%c with %o at %c%s%c.","color:red","color:auto","color:#0c85e9","color:auto",t,"color:#0c85e9",new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toJSON().slice(0,-5).replace("T"," "),"color:auto"),l.E.qn&&console.log("Sorry, but some commands of Vimium C require the permission to run in incognito mode."),e?parseFloat(l.E.vn)<=parseFloat(e)||((i=l.He).Ge?i.Ge(6e3):i.Ge=true,l.on("notifyUpdate")&&(e="vimium_c-upgrade-notification",u={type:"basic",iconUrl:location.origin+"/icons/icon128.png",title:"Vimium C "+n("Upgrade"),message:n("upgradeMsg",[l.E.En])+n("upgradeMsg2")+"\n\n"+n("clickForMore")},f<67&&(u.isClickable=true),f>=70&&(u.silent=true),chrome.notifications&&chrome.notifications.create(e,u,function(t){var n;if(n=r.x())return n;e=t||e,chrome.notifications.onClicked.addListener(function(t){t===e&&(chrome.notifications.clear(e),a.ot[19]({u:r.V("vimium://release")}))})}))):(l.Rn&&l.Rn()||Promise.resolve()).then(function(){a.ot[19]({u:l.E.Nn+"#commands"})})}))}),r.Fe=function(t){function n(){if(Math.abs(performance.now()-e)<1e5)i=setTimeout(n,3e5);else{i=0;var t=l.mn;KeyMappings&&(t.keyMappings=null,KeyMappings=null)}}var e=0,i=0,u=0;return r.Fe=function(t){t&&(u=u+t>0?u+t:0),u>0||!KeyMappings?i&&(clearTimeout(i),i=0):(e=performance.now(),i=i||setTimeout(n,3e5))},r.Fe(t)},r.Ae(1200,function(){l.He.Be&&chrome.runtime.onInstalled.removeListener(l.He.Be),l.He.Be=null,document.documentElement.innerHTML="",r.y()});